(self.webpackChunkvyxal_github_io=self.webpackChunkvyxal_github_io||[]).push([[8],{2653:(e,t,r)=>{r.r(t),r.d(t,{default:()=>F});var n=r(4848),o=r(6540),a=r(4618),s=r(6363),l=r(9946),O=r(5874),i=r(3234),c=r(1371),d=r(5338),m=r(5962);const u=/[a-zA-Z-?!*+=&%<>][a-zA-Z0-9-?!*+=&%<>:]*/,f=new RegExp(`( |^)${u.source}`);function $(e,t){return{label:t&&"syntax"!=e.type?e.keywords[0]??"<error>":e.symbol,detail:e.name,info(){const t=document.createElement("div"),r=(0,d.H)(t);return r.render((0,m.H)({thing:e})),{dom:t,destroy(){setTimeout((()=>r.unmount()))}}},type:"element"==e.type?"method":"keyword"}}function P(e,t){const r=e.matchBefore(t?u:f);if(null!=r){r.text=r.text.trimStart();const e=[...i.Y_.search(r.text),...i.J6.search(r.text),...i.Hg.search(r.text)];return e.length?{from:r.from,filter:!1,options:e.map((e=>({...$(e.item,t),boost:10*(1-(e.score??0))}))),update:(e,r,n,o)=>P(o,t)}:null}return null}async function S(e,t,r){const n=P(t,r);return null!=n?Promise.resolve(n):t.explicit?{from:t.pos,to:t.pos,filter:!1,options:[...e.elements.values()].map((e=>$(e,r))),update:(e,t,n,o)=>P(o,r)}:Promise.resolve(null)}function h(e,t){return(0,c.Ux)(((r,n)=>{const o=(0,O.mv)(r.state).resolve(n,1),a=r.state.doc.sliceString(o.from,o.to);let s;if("Element"==o.name||"Modifier"==o.name)s=("Modifier"==o.name?t?e.modifiersByKeyword:e.modifiers:t?e.elementsByKeyword:e.elements).get(a);else{if(!e.syntax.has(a))return null;s=e.syntax.get(a)}return void 0!==s?{pos:n,create(){const e=document.createElement("div"),t=(0,m.H)({thing:s,shadow:!0}),r=(0,d.H)(e);return r.render(t),{dom:e,destroy(){setTimeout((()=>r.unmount()))}}}}:null}))}var p=r(6585),g=r(3720),_=r(8820);const b=_.U1.deserialize({version:14,states:"!QOVQPOOOOQO'#Ci'#CiOOQO'#Ch'#ChOOQO'#Cl'#ClOOQO'#C_'#C_OOQO'#Ct'#CtQVQPOOOOQO-E6r-E6r",stateData:"!g~OPOS~OSSOTSOUSOVSOWSOXSOYSOZSO^PO_QOaRObROcROdSOeSOfSOgSOkPOlQO~OPg~",goto:"|iPPPjPPPPPPPPnrPPnPPPPPPPvTTOUTSOUTQOUQUORVU",nodeNames:"⚠ Space Program Statement Digraph SugarTrigraph SyntaxTrigraph StructureOpen StructureClose ListStuff Modifier VariableThing Number NumberDecimal NumberPart TwoCharNumber AnyString String SingleCharString TwoCharString Branch ContextIndex Comment Element",maxTerm:28,skippedNodes:[0,1],repeatNodeCount:1,tokenData:"7g~R#uOX)fX^)k^p)fpq)kqr)frs+Vst-itw)fwx2cxy1{yz2|z!O)f!O!P3R!P!Q3W!Q!R3]!R![3b![!})f!}#O1{#O#P)f#P#Q2|#Q#_)f#_#`3j#`#o)f#o#p1{#p#q4O#q#r2|#r#s4T#s#y)f#y#z)k#z$f)f$f$g)k$g$j)f$j$k5i$k${)f${$|1{$|%V)f%V%W3W%W%v)f%v%w3j%w&b)f&b&c3j&c'm)f'm'n5v'n){)f){)|1{)|5a)f5a5b1{5b6s)f6s6t3W6t8T)f8T8U3W8U8{)f8{8|3W8|#BY)f#BY#BZ)k#BZ$9g)f$9g$9h3W$9h$9i3W$9i$9s)f$9s$9t3W$9t$9v)f$9v$9w3W$9w$9x3W$9x$9{)f$9{$9|3W$9|$9}3W$9}$:O3W$:O$:T)f$:T$:U3W$:U$:V3W$:V$:W)f$:W$:X3W$:X$:[)f$:[$:]3W$:]$:^3W$:^$:_3W$:_$:a)f$:a$:b3W$:b$:c3W$:c$:d)f$:d$:e3W$:e$:g)f$:g$:h3W$:h$;t)f$;t$;u3W$;u$;x)f$;x$;y3W$;y$;|)f$;|$;}3W$;}$<Q)f$<Q$<R3W$<R$<S)f$<S$<T3W$<T$<])f$<]$<^3W$<^$<_5{$<_$<e)f$<e$<f3W$<f$>Y)f$>Y$>Z1{$>Z$?f)f$?f$?g1{$?g$IS)f$IS$I_)k$I_$Ip)f$Is$I|)f$I|$JO)k$JO$JT)f$JT$JU)k$JU$KV)f$KV$KW)k$KW$Kw)f$Kw$Kx3W$Kx$L})f$L}$MO1{$MO%&`)f%&`%&a3j%&a%'P)f%'P%'Q3W%'Q%'R3W%'R%GS)f%GS%GT1{%GT&;p)f&;p&;q3W&;q&FU)f&FU&FV)k&FV;'S)f;'S;=`7a<%lO)f~)kOg~~)rYP~g~X^*bpq*b#y#z*b$f$g*b#BY#BZ*b$IS$I_*b$I|$JO*b$JT$JU*b$KV$KW*b&FU&FV*b~*gYP~X^*bpq*b#y#z*b$f$g*b#BY#BZ*b$IS$I_*b$I|$JO*b$JT$JU*b$KV$KW*b&FU&FV*b~+Y]Or+Vrs,Rs#O+V#O#P,W#P$Ip+V$Ip$Iq,R$Iq$Ir,R$Ir$Is,R$Is;'S+V;'S;=`-c<%l~+V~O+V~~,R~,WOa~~,ZRO;'S+V;'S;=`,d;=`O+V~,g^Or+Vrs,Rs#O+V#O#P,W#P$Ip+V$Ip$Iq,R$Iq$Ir,R$Ir$Is,R$Is;'S+V;'S;=`-c;=`<%l+V<%l~+V~O+V~~,R~-fP;=`<%l+V~-lhOq/Wrs/Wst/]tu/tu|/W|}0`}!O/W!O!P0`!P![/W![!]0{!]!_/W!_!`/t!`!a/t!a!b/W!c!}/W!}#O2W#O#P/W#P#Q2W#Q#R0`#R#o/W#o#p1{#p;'S/W;'S;=`2]<%lO/W~/]OS~~/bSf~OY/]Z;'S/];'S;=`/n<%lO/]~/qP;=`<%l/]~/wQ!c!}/}#T#o/}~0SSZ~!Q![/}!c!}/}#R#S/}#T#o/}~0eRS~O;'S0n;'S;=`0s;=`O0n~0sOT~~0xPT~;=`<%l0n~1OVO![1e![!]1j!]!}1e!}#O/t#O;'S1e;'S;=`2Q<%lO1e~1jOU~~1oSU~{|1{!g!h1{!o!p1{!t!u1{~2QOV~~2TP;=`<%l1e~2]OX~~2`P;=`<%l/W~2fRO;'S2o;'S;=`2t;=`O2o~2tOb~~2yPb~;=`<%l2o~3ROW~~3WOk~~3]OY~~3bO^~~3gP^~!Q![3b~3mRO;'S/W;'S;=`3v;=`O/W~3{PS~;=`<%l/W~4TOd~~4WRO;'S4a;'S;=`4z;=`O4a~4dRO;'S4m;'S;=`4r;=`O4m~4rO_~~4wP_~;=`<%l4m~4}SO;'S4m;'S;=`4r;=`<%l5Z<%lO4m~5`R_~O;'S4m;'S;=`4r;=`O4m~5nPg~!Q![5q~5vOe~~5{Ol~~6ORO;'S6X;'S;=`6r;=`O6X~6[RO;'S6e;'S;=`6j;=`O6e~6jOc~~6oPc~;=`<%l6e~6uSO;'S6e;'S;=`6j;=`<%l7R<%lO6e~7WRc~O;'S6e;'S;=`6j;=`O6e~7dP;=`<%l)f",tokenizers:[0],topRules:{Program:[0,2]},tokenPrec:66}),W=O.bj.define({parser:b.configure({props:[(0,g.pn)({Digraph:g._A.function(g._A.propertyName),SugarTrigraph:g._A.macroName,SyntaxTrigraph:g._A.operator,StructureOpen:g._A.bracket,StructureClose:g._A.bracket,Modifier:g._A.modifier,VariableThing:g._A.variableName,String:g._A.string,SingleCharString:g._A.special(g._A.string),TwoCharString:g._A.special(g._A.string),"Number!":g._A.number,TwoCharNumber:g._A.special(g._A.number),Branch:g._A.punctuation,ContextIndex:g._A.controlKeyword,Comment:g._A.comment,Element:g._A.keyword})]})}),x=c.Lz.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"},"&:not(.cm-focused) .cm-eofMarker":{display:"none"},".cm-eofMarker":{display:"inline"}}),w=c.NZ.mark({class:"cm-matchingBracket"}),y=c.NZ.mark({class:"cm-nonmatchingBracket"});class k extends c.xO{eq(){return!0}toDOM(){const e=document.createElement("span");return e.classList.add("cm-eofMarker"),e.classList.add("cm-placeholder"),e.classList.add("cm-matchingBracket"),e.textContent="␄",e}}const R=c.NZ.widget({widget:new k,side:1});function v(e,t,r){const n=(0,O.mv)(e),o=n.resolveInner(t,r);if("StructureOpen"==o.type.name){const a=n.cursorAt(t,r);let s=0;do{if("StructureClose"==a.name){const t=e.doc.sliceString(a.from,a.to);if("}"==t?s--:")"==t?s-=2:"]"==t&&(s=0),s<=0)return{matched:!0,start:[o],end:a.node}}else"StructureOpen"==a.name&&s++}while(a.next(!0));return{matched:!0,start:[o],end:null}}if("StructureClose"==o.type.name){let t=[];n.iterate({enter(r){if("StructureClose"==r.name){const n=e.doc.sliceString(r.from,r.to);"}"==n?t.splice(t.length-2):")"==n?t.pop():"]"==n&&(t=[])}else"StructureOpen"==r.name&&t.push(r.node)},from:0,to:o.from-1});const r=e.doc.sliceString(o.from,o.to);if("}"==r){if(t.length>=1)return{matched:!0,start:[t.pop()],end:o}}else if(")"==r){if(t.length>=2)return{matched:!0,start:t.splice(t.length-2),end:o}}else{if("]"!=r)throw new Error(`Unexpected StructureClose ${r}`);if(t.length>0)return{matched:!0,start:t,end:o}}return{matched:!1,highlight:o}}return null}const U=p.sU.define({create:()=>c.NZ.none,update(e,t){if(!t.docChanged&&!t.selection)return e;const r=[];for(const e of t.state.selection.ranges){if(!e.empty)continue;const n=v(t.state,e.head,1)??v(t.state,e.head,-1);n&&(n.matched?(n.start.map((e=>r.push(w.range(e.from,e.to)))),n.end?r.push(w.range(n.end.from,n.end.to)):r.push(R.range(t.state.doc.length))):r.push(y.range(n.highlight.from,n.highlight.to)))}return c.NZ.set(r,!0)},provide:e=>c.Lz.decorations.from(e)});function V(e){async function t(t,r){if("String"!=r.name)return Promise.resolve(null);const n=t.state.doc.slice(r.from,r.to).toString();switch(n.at(-1)){case'"':default:return Promise.resolve(null);case"„":{const t=await e.decompress(n),r=document.createElement("div");return r.innerHTML=`<b>Compressed string: </b> ${t}`,r}}}return[(0,c.Ux)((async(e,r)=>{const n=(0,O.mv)(e.state).resolve(r),o=await t(e,n);if(null!=o){const a=document.createElement("div");return a.appendChild(o),{pos:r,create:()=>({dom:a,update:async o=>{if(o.changes.touchesRange(n.from,n.to)){const n=o.changes.mapPos(r,-1,p.iR.TrackDel);if(null!=n){const r=await t(e,(0,O.mv)(e.state).resolve(n));null!=r&&a.replaceChildren(r)}}}})}}return null}))]}function T(e,t){return new O.Yy(W,[(r=t,W.data.of({autocomplete(e){const t=e.matchBefore(/#[,.^](.)/);if(null!=t){const e=r.sugars.get(t.text);if("string"==typeof e)return Promise.resolve({from:t.from,filter:!1,options:[{label:e,detail:"sugar trigraph",type:"constant"}]})}return S(r,e,!1)}})),V(e),h(t,!1),[x,U]]);var r}var C=r(7404),I=r(5404),Q=r(3087),A=r(3343);const j={__proto__:null,"yes?":10,"?":12,if:14,for:16,"for<":18,"do-to-each":20,"each-as":22,while:24,"while<":26,"exists<":28,"relation<":30,"generate-from<":32,"generate<":34,endfor:36,"end-for":38,endwhile:40,"end-while":42,endlambda:44,"end-lambda":46,end:48,"end-end":50,"end-all":52,"close-all":54,"}":56,"->":60,"else:":62,else:64,elif:66,"else-if":68,body:70,do:72,branch:74,then:76,in:78,using:80,"no?":82,"=>":84,from:86,as:88,with:90,given:92,":and:":94,has:96,does:98,on:100,",":102,lambda:106,lam:108,"map-lambda":110,"map-lam":112,"map<":114,"filter-lambda":116,"filter-lam":118,"filter<":120,"reduce-lambda":122,"reduce-lam":124,"reduce<":126,"fold-lambda":128,"fold-lam":130,"fold<":132,"sort-lambda":134,"sort-lam":136,"sort<":138,"{":140},q=_.U1.deserialize({version:14,states:"!^OQOPOOOOOO'#C^'#C^OOOO'#D}'#D}QQOPOOOOOO'#C_'#C_O%qOPO'#C_OOOO'#Cy'#CyOOOO'#Db'#DbOOOO-E7{-E7{OOOO,58y,58y",stateData:"%}~OTSOUSOVSOWSOXSOYSOZSO[SO]SO^SO_SO`TObSOcSOdSOeSOfSOgSOhSOiSOjSOkSOlSOnUOoUOpUOqUOrUOsUOtUOuUOvUOwUOxUOyUOzUO{UO|UO}UO!OUO!PUO!QUO!RUO!SUO!TUO!VVO!WVO!XVO!YVO!ZVO![VO!]VO!^VO!_VO!`VO!aVO!bVO!cVO!dVO!eVO!fVO!gVO!hVO!iPO!jPO!kPO!lPO!mPO!nPO!oPO!pPO~OaXO~O!l!k!o!jS!o~",goto:"#R!rPP!s!wPPPPPPPPPPPPPPPPPPPPPPPPP!wPPPPPPPPPPPPPPPPPPPPPP!wPPPPPPPPPPPPPPPPPPPPPPPPPP!{TQORTPORQRORWR",nodeNames:"⚠ Program Word Structure WeirdKW yes? ? if for for< do-to-each each-as while while< exists< relation< generate-from< generate< endfor end-for endwhile end-while endlambda end-lambda end end-end end-all close-all } Branch -> else: else elif else-if body do branch then in using no? => from as with given :and: has does on , Lambda lambda lam map-lambda map-lam map< filter-lambda filter-lam filter< reduce-lambda reduce-lam reduce< fold-lambda fold-lam fold< sort-lambda sort-lam sort< { String Number Element Modifier VariableThing ListStuff GroupStuff Comment",maxTerm:80,skippedNodes:[0,4],repeatNodeCount:1,tokenData:",q~Rars!Wst$^tu${xy%gyz%x}!O&e!O!P'k!Q!R'k!R!['p![!]'x!a!b&e!c!}(_!}#O+a#P#Q+a#T#](_#]#^+f#^#o(_~!ZZOr!Wrs!|s#O!W#O#P#R#P$Ip!W$Ip$Iq!|$Iq$Ir!|$Ir$Is!|$Is;'S!W;'S;=`$W<%lO!W~#RO!i~~#URO;'S!W;'S;=`#_;=`O!W~#b[Or!Wrs!|s#O!W#O#P#R#P$Ip!W$Ip$Iq!|$Iq$Ir!|$Ir$Is!|$Is;'S!W;'S;=`$W;=`<%l!W<%lO!W~$ZP;=`<%l!W~$aPst$d~$iS!p~OY$dZ;'S$d;'S;=`$u<%lO$d~$xP;=`<%l$d~%OQ!c!}%U#T#o%U~%ZS!m~!Q![%U!c!}%U#R#S%U#T#o%U~%lS!o~|}%x!O!P%x![!]%}!]!^&Y~%}O!o~~&SQ!o~!O!P%x![!]%x~&_Q!o~|}%x!]!^%x~&j^S~qr&euv&evw&ez{&e{|&e}!O&e!Q![&e![!]'f!^!_&e!_!`&e!`!a&e!a!b&e!c!}&e#T#o&e~'kOS~~'pO!j~~'uP!j~!Q!['p~'{Q!_!`(R!`!a${~(UR!c!}%U!}#O${#T#o%U~(f`!k~S~qr(_uv(_vw(_z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_~)oO!l~S~~)va!k~S~qr(_uv(_vw(_wx*{z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_~+OP#h#i+R~+WP!k~#b#c+Z~+^Pwx*{~+fO!n~~+o`!k~!j~S~qr(_uv(_vw(_z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_",tokenizers:[0],topRules:{Program:[0,1]},specialized:[{term:4,get:e=>j[e]||-1}],tokenPrec:222}),N=O.bj.define({parser:q.configure({props:[(0,g.pn)({Structure:g._A.controlKeyword,Branch:g._A.controlKeyword,Lambda:g._A.controlKeyword,String:g._A.string,Number:g._A.number,Element:g._A.keyword,Modifier:g._A.modifier,VariableThing:g._A.variableName,ListStuff:g._A.literal,GroupStuff:g._A.keyword,Comment:g._A.comment})]})});function z(e){return N.data.of({autocomplete:t=>S(e,t,!0)})}var Z=r(961),B=r(7665),E=r(5605),K=r(5615);const Y=[a.Nb.high(a.w4.of([{key:"Ctrl-Enter",run:e=>!(e.state.doc.length<=0)&&(window.dispatchEvent(new Event("run-vyxal")),!0),preventDefault:!0}])),s.V0,(0,C.yU)(),(0,c.$K)(),(0,c.dz)(),(0,c.Wu)(),c.Lz.theme({"&":{height:"100%"},"&.cm-focused":{outline:"none"},".cm-scroller":{overflow:"auto"},".cm-tooltip":{"z-index":"300 !important"}})],L=new Q.T,M={[I.Sx.Dark]:l.Ts,[I.Sx.Light]:A.al};function D({error:e,resetErrorBoundary:t}){return(0,n.jsxs)(E.A,{direction:"vertical",className:"bg-danger-subtle p-2 position-absolute",children:[(0,n.jsxs)("h3",{className:"text-danger",children:[(0,n.jsx)("i",{className:"bi bi-x-circle"})," An error occured"]}),(0,n.jsx)(K.A,{variant:"danger",onClick:t,children:"Reset editor"}),e.toString(),(0,n.jsx)("div",{children:e.stack})]})}function F({code:e,ratio:t,children:r,setCode:s,theme:l,literate:d,claimFocus:m,autoFocus:u}){const f=(0,o.useContext)(i.ix),$=(0,o.useRef)(null),P=(0,o.useCallback)((e=>{s(e)}),[]),[S,p]=(0,o.useState)(null),g=(0,o.useMemo)((()=>c.S7.of((()=>{const e=document.createElement("div");return e.classList.add("p-1"),p(e),{dom:e,top:!0}}))),[]),_=(0,o.useMemo)((()=>c.Lz.focusChangeEffect.of(((e,t)=>(t&&$.current&&m($.current),null)))),[]),b=(0,o.useMemo)((()=>Y.concat(d?function(e){return new O.Yy(N,[z(e),h(e,!0)])}(f):T(L,f),g,_)),[d]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(B.tH,{FallbackComponent:D,children:[(0,n.jsx)(a.Ay,{basicSetup:!1,theme:M[l],value:e,style:{height:t},onChange:P,extensions:b,ref:$,autoFocus:u}),null!==S&&(0,Z.createPortal)(r,S)]})})}}}]);
//# sourceMappingURL=../maps/editor.bc2626a6.js.map