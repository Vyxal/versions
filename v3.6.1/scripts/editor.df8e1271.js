(self.webpackChunkvyxal_github_io=self.webpackChunkvyxal_github_io||[]).push([[8],{6575:(e,t,r)=>{r.r(t),r.d(t,{default:()=>G});var n=r(4848),o=r(6540),O=r(4618),a=r(6363),s=r(9946),i=r(5874),c=r(1371),l=r(5338),m=r(8010),u=r(3720),d=r(8820);const P=d.U1.deserialize({version:14,states:"!QOVQPOOOOQO'#Ch'#ChOOQO'#Cg'#CgOOQO'#Ck'#CkOOQO'#C_'#C_OOQO'#Cs'#CsQVQPOOOOQO-E6q-E6q",stateData:"!a~OPOS~OSSOTSOUSOVSOWSOXSOYSO]PO^QO`ROaRObROcSOdSOeSOfSOjPO~OPf~",goto:"{hPPPiPPPPPPPmqPPmPPPPPPPuTTOUTSOUTQOUQUORVU",nodeNames:"⚠ Space Program Statement Digraph SyntaxTrigraph StructureOpen StructureClose ListStuff Modifier VariableThing Number NumberDecimal NumberPart TwoCharNumber AnyString String SingleCharString TwoCharString Branch ContextIndex Comment Element",maxTerm:26,skippedNodes:[0,1],repeatNodeCount:1,tokenData:"4]~R#^OX'}X^(S^p'}pq(Sqr'}rs)nst+ttw'}wx/kxy/Ryz0Uz!O'}!O!P0Z!P!Q'}!Q!R0`!R![0e![!}'}!}#O/R#O#P'}#P#Q0U#Q#_'}#_#`0m#`#o'}#o#p/R#p#q1R#q#r0U#r#s1W#s#y'}#y#z(S#z$f'}$f$g(S$g$n'}$n$o1W$o${'}${$|/R$|%V'}%V%W1W%W%v'}%v%w0m%w&b'}&b&c0m&c){'}){)|/R)|/Y'}/Y/Z/R/Z5s'}5s5t/R5t5v'}5v5w/R5w#3['}#3[#3]1]#3]#3h'}#3h#3i2q#3i#BY'}#BY#BZ(S#BZ#D['}#D[#D]1W#D]$@v'}$@v$@w1W$@w$IS'}$IS$I_(S$I_$Ip'}$Is$I|'}$I|$JO(S$JO$JT'}$JT$JU(S$JU$KS'}$KS$KT1W$KT$KV'}$KV$KW(S$KW%&`'}%&`%&a0m%&a%'P'}%'P%'Q1W%'Q%'R1W%'R%'f'}%'f%'g1W%'g%-w'}%-w%-x0U%-x%.h'}%.h%.i/R%.i%.l'}%.l%.m1W%.m%.n'}%.n%.o/R%.o%.q'}%.q%.r1W%.r%.t'}%.t%.u/R%.u%.v0U%.v%3x'}%3x%3y1W%3y%3z1W%3z%3{1W%3{%3|1W%3|%:h'}%:h%:i1W%:i%Fl'}%Fl%Fm1W%Fm&&j'}&&j&&k1W&&k&FU'}&FU&FV(S&FV;'S'};'S;=`4V<%lO'}~(SOf~~(ZYP~f~X^(ypq(y#y#z(y$f$g(y#BY#BZ(y$IS$I_(y$I|$JO(y$JT$JU(y$KV$KW(y&FU&FV(y~)OYP~X^(ypq(y#y#z(y$f$g(y#BY#BZ(y$IS$I_(y$I|$JO(y$JT$JU(y$KV$KW(y&FU&FV(y~)qZOr)nrs*ds#O)n#O#P*i#P$Ip)n$Ip$Iq*d$Iq$Ir*d$Ir$Is*d$Is;'S)n;'S;=`+n<%lO)n~*iO`~~*lRO;'S)n;'S;=`*u;=`O)n~*x[Or)nrs*ds#O)n#O#P*i#P$Ip)n$Ip$Iq*d$Iq$Ir*d$Ir$Is*d$Is;'S)n;'S;=`+n;=`<%l)n<%lO)n~+qP;=`<%l)n~+weOq-Yrs-Yst-_tu-vu![-Y![!]._!]!_-Y!_!`-v!`!a-v!a!b-Y!c!}-Y!}#O.|#O#P-Y#P#Q.|#Q#o-Y#o#p/R#p$j-Y$j$k/W$k;'S-Y;'S;=`/e<%lO-Y~-_OS~~-dSe~OY-_Z;'S-_;'S;=`-p<%lO-_~-sP;=`<%l-_~-yP!c!}-|~.RSY~!Q![-|!c!}-|#R#S-|#T#o-|~.bTO!}.q!}#O-v#O;'S.q;'S;=`.v<%lO.q~.vOT~~.yP;=`<%l.q~/ROW~~/WOU~~/]PS~!Q![/`~/eOd~~/hP;=`<%l-Y~/nRO;'S/w;'S;=`/|;=`O/w~/|Oa~~0RPa~;=`<%l/w~0ZOV~~0`Oj~~0eO]~~0jP]~!Q![0e~0pRO;'S-Y;'S;=`0y;=`O-Y~1OPS~;=`<%l-Y~1WOc~~1]OX~~1`RO;'S1i;'S;=`2S;=`O1i~1lRO;'S1u;'S;=`1z;=`O1u~1zO^~~2PP^~;=`<%l1u~2VSO;'S1u;'S;=`1z;=`<%l2c<%lO1u~2hR^~O;'S1u;'S;=`1z;=`O1u~2tRO;'S2};'S;=`3h;=`O2}~3QRO;'S3Z;'S;=`3`;=`O3Z~3`Ob~~3ePb~;=`<%l3Z~3kSO;'S3Z;'S;=`3`;=`<%l3w<%lO3Z~3|Rb~O;'S3Z;'S;=`3`;=`O3Z~4YP;=`<%l'}",tokenizers:[0],topRules:{Program:[0,2]},tokenPrec:60}),p=i.bj.define({parser:P.configure({props:[(0,u.pn)({Digraph:u._A.function(u._A.propertyName),SyntaxTrigraph:u._A.operator,StructureOpen:u._A.bracket,StructureClose:u._A.bracket,ListStuff:u._A.bracket,Modifier:u._A.moduleKeyword,VariableThing:u._A.variableName,String:u._A.string,SingleCharString:u._A.special(u._A.string),TwoCharString:u._A.special(u._A.string),"Number!":u._A.number,TwoCharNumber:u._A.special(u._A.number),Branch:u._A.punctuation,ContextIndex:u._A.controlKeyword,Comment:u._A.comment,Element:u._A.keyword})]})}),f={__proto__:null,for:10,if:12,"do-to-each":14,"for<":16,"relation<":18,"yes?":20,"generate<":22,while:24,"?":26,"while<":28,"generate-from<":30,"each-as":32,"->":36,"else:":38,else:40,elif:42,"else-if":44,body:46,do:48,branch:50,then:52,in:54,using:56,"no?":58,"=>":60,from:62,as:64,with:66,given:68,":and:":70,has:72,does:74,on:76,"map-permutations<":80,"map-perms":82,"map-lam":84,"lambda-stack":86,"eager-map-lambda":88,"sort<":90,"map-permutations":92,"filter<":94,"eager-map-lam":96,"sort-lambda":98,"filter-lambda":100,"map<":102,lam:104,"filter-lam":106,"permutations<":108,"sort-lam":110,lambda:112,"map-lambda":114,"eager-map<":116},h=d.U1.deserialize({version:14,states:"(jOQOPOOOOOO'#C^'#C^OOOO'#Dq'#DqQQOPOOOuOPO'#C_OzOPO'#CmO!POPO'#DTOOOO-E7o-E7oO!UOPO,58yO!ZOPO,59XO!`OPO,59oO!eOPO1G.eO!jOPO1G.sO!oOPO1G/ZO!tOPO7+$PO!yOPO7+$_O#OOPO7+$uO#TOPO<<GkO#YOPO<<GyO#_OPO<<HaO#dOPOAN=VO#iOPOAN=eO#nOPOAN={O#sOPOG22qO#xOPOG23PO#}OPOG23gO$SOPOLD(]O$XOPOLD(kO$^OPOLD)RO$cOPO!$'KwO$hOPO!$'LVO$mOPO!$'LmO$rOPO!)9AcO$wOPO!)9AqO$|OPO!)9BXO%ROPO!.K6}O%WOPO!.K7]O%]OPO!.K7sOOOO!4/,i!4/,iO%bOPO!4/,wO%gOPO!4/-_O%lOPO!9A!cO%qOPO!9A!yO%vOPO!?$E}O%{OPO!?$FeO&QOPO!D6;iO&VOPO!D6<PO&[OPO!IH1TO&aOPO!IH1kO&fOPO# ,&oO&kOPO# ,'VO&pOPO#&=JZO&uOPO#&=JqO&zOPO#, ?uOOOO#, @]#, @]O'POPO#135aO'UOPO#6E*{OOOO#<(Ng#<(Ng",stateData:"'b~OTSObTOxUO!]PO!^PO!_PO!`PO!aPO!bPO!cPO!dPO~OUWO~OcXO~OyYO~OVZO~Od[O~Oz]O~OW^O~Oe_O~O{`O~OXaO~OfbO~O|cO~OYdO~OgeO~O}fO~OZgO~OhhO~O!OiO~O[jO~OikO~O!PlO~O]mO~OjnO~O!QoO~O^pO~OkqO~O!RrO~O_sO~OltO~O!SuO~O`vO~OmwO~O!TxO~OnyO~O!UzO~Oo{O~O!V|O~Op}O~O!W!OO~Oq!PO~O!X!QO~Or!RO~O!Y!SO~Os!TO~O!Z!UO~Ot!VO~O![!WO~Ou!XO~Ol!YO~Ov!ZO~O!`!_!c!^S!c~",goto:"!u!fPP!g!kPPPPPPPPPPPPP!kPPPPPPPPPPPPPPPPPPPPP!kPPPPPPPPPPPPPPPPPPPPPPPPPPP!oTQORTPORQRORVR",nodeNames:"⚠ Program Word Structure WeirdKW for if do-to-each for< relation< yes? generate< while ? while< generate-from< each-as Branch -> else: else elif else-if body do branch then in using no? => from as with given :and: has does on Lambda map-permutations< map-perms map-lam lambda-stack eager-map-lambda sort< map-permutations filter< eager-map-lam sort-lambda filter-lambda map< lam filter-lam permutations< sort-lam lambda map-lambda eager-map< String Number NormalKW ModifierKW VariableThing ListStuff GroupStuff Comment",maxTerm:68,skippedNodes:[0,4],repeatNodeCount:1,tokenData:"*}~R_rs!Qst$Wtu$uxy%ayz%l}!O%|!O!P'S!Q!R'S!R!['X![!]'a!a!b%|!c!}'v!}#O*x#P#Q*x#T#o'v~!TZOr!Qrs!vs#O!Q#O#P!{#P$Ip!Q$Ip$Iq!v$Iq$Ir!v$Ir$Is!v$Is;'S!Q;'S;=`$Q<%lO!Q~!{O!]~~#ORO;'S!Q;'S;=`#X;=`O!Q~#[[Or!Qrs!vs#O!Q#O#P!{#P$Ip!Q$Ip$Iq!v$Iq$Ir!v$Ir$Is!v$Is;'S!Q;'S;=`$Q;=`<%l!Q<%lO!Q~$TP;=`<%l!Q~$ZPst$^~$cS!d~OY$^Z;'S$^;'S;=`$o<%lO$^~$rP;=`<%l$^~$xQ!c!}%O#T#o%O~%TS!a~!Q![%O!c!}%O#R#S%O#T#o%O~%fQ!c~!O!P%l![!]%q~%qO!c~~%vQ!c~!O!P%l![!]%l~&R^S~qr%|uv%|vw%|z{%|{|%|}!O%|!Q![%|![!]&}!^!_%|!_!`%|!`!a%|!a!b%|!c!}%|#T#o%|~'SOS~~'XO!^~~'^P!^~!Q!['X~'dQ!_!`'j!`!a$u~'mR!c!}%O!}#O$u#T#o%O~'}`!_~S~qr'vuv'vvw'vz{'v{|'v}!O'v!Q!['v![!])P!^!_'v!_!`'v!`!a'v!a!b'v!c!}'v#T#b'v#b#c)W#c#o'v~)WO!`~S~~)_a!_~S~qr'vuv'vvw'vwx*dz{'v{|'v}!O'v!Q!['v![!])P!^!_'v!_!`'v!`!a'v!a!b'v!c!}'v#T#b'v#b#c)W#c#o'v~*gP#h#i*j~*oP!_~#b#c*r~*uPwx*d~*}O!b~",tokenizers:[0],topRules:{Program:[0,1]},specialized:[{term:4,get:e=>f[e]||-1}],tokenPrec:287}),g=i.bj.define({parser:h.configure({props:[(0,u.pn)({Structure:u._A.controlKeyword,Branch:u._A.controlKeyword,Lambda:u._A.controlKeyword,String:u._A.string,Number:u._A.number,Element:u._A.keyword,Modifier:u._A.moduleKeyword,VariableThing:u._A.variableName,ListStuff:u._A.literal,GroupStuff:u._A.keyword,Comment:u._A.comment})]})}),S=/[a-zA-Z-?!*+=&%<>][a-zA-Z0-9-?!*+=&%<>:]*/,$=new RegExp(`( |^)${S.source}`);function v(e,t){return{label:t&&"syntax"!=e.type?e.keywords[0]??"<error>":e.symbol,detail:e.name,info(){const t=document.createElement("div"),r=(0,l.H)(t);return r.render((0,m.H)({thing:e})),{dom:t,destroy(){setTimeout((()=>r.unmount()))}}},type:"element"==e.type?"method":"keyword"}}function b(e,t,r){const n=t.matchBefore(r?S:$);if(null!=n){const t=e.search(n.text.trimStart());return t.length?{from:n.from,filter:!1,options:t.map((e=>({...v(e.item,r),boost:10*(1-(e.score??0))}))),update:(t,n,o,O)=>b(e,O,r)}:null}return null}async function y(e,t,r){const n=b(e.fuse,t,r);return null!=n?Promise.resolve(n):t.explicit?{from:t.pos,to:t.pos,filter:!1,options:[...e.elements.values()].map((e=>v(e,r))),update:(t,n,o,O)=>b(e.fuse,O,r)}:Promise.resolve(null)}function w(e,t){return(0,c.Ux)(((r,n)=>{const o=(0,i.mv)(r.state).resolve(n,1),O=r.state.doc.sliceString(o.from,o.to);let a;if("Element"==o.name||"Digraph"==o.name||"Modifier"==o.name)a=("Modifier"==o.name?t?e.modifiersByKeyword:e.modifiers:t?e.elementsByKeyword:e.elements).get(O);else{if(!e.syntax.has(O))return null;a=e.syntax.get(O)}return void 0!==a?{pos:n,create(){const e=document.createElement("div"),t=(0,m.H)({thing:a,shadow:!0}),r=(0,l.H)(e);return r.render(t),{dom:e,destroy(){setTimeout((()=>r.unmount()))}}}}:null}))}const _=new i.Yy(p),k=new i.Yy(g);function Q(e){return p.data.of({autocomplete:t=>y(e,t,!1)})}var R=r(7404),x=r(2323),C=r(3343),I=r(7656),T=r(961),A=r(7665),W=r(5605),q=r(5615),Z=r(6585);const z=c.Lz.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"},"&:not(.cm-focused) .cm-eofMarker":{display:"none"},".cm-eofMarker":{display:"inline"}}),N=c.NZ.mark({class:"cm-matchingBracket"}),Y=c.NZ.mark({class:"cm-nonmatchingBracket"});class U extends c.xO{eq(){return!0}toDOM(){const e=document.createElement("span");return e.classList.add("cm-eofMarker"),e.classList.add("cm-placeholder"),e.classList.add("cm-matchingBracket"),e.textContent="␄",e}}const V=c.NZ.widget({widget:new U,side:1}),D=Z.sj.define({combine:e=>(0,Z.QR)(e,{showEof:!1})});function E(e,t,r){const n=(0,i.mv)(e),o=n.resolveInner(t,r);if("StructureOpen"==o.type.name){const O=n.cursorAt(t,r);let a=0;do{if("StructureClose"==O.name){const t=e.doc.sliceString(O.from,O.to);if("}"==t?a--:")"==t?a-=2:"]"==t&&(a=0),a<=0)return{matched:!0,start:[o],end:O.node}}else"StructureOpen"==O.name&&a++}while(O.next(!0));return{matched:!0,start:[o],end:null}}if("StructureClose"==o.type.name){let t=[];n.iterate({enter(r){if("StructureClose"==r.name){const n=e.doc.sliceString(r.from,r.to);"}"==n?t.pop():")"==n?t.splice(t.length-2):"]"==n&&(t=[])}else"StructureOpen"==r.name&&t.push(r.node)},from:0,to:o.from-1});const r=e.doc.sliceString(o.from,o.to);if("}"==r){if(t.length>=1)return{matched:!0,start:[t.pop()],end:o}}else if(")"==r){if(t.length>=2)return{matched:!0,start:t.splice(t.length-2),end:o}}else{if("]"!=r)throw new Error(`Unexpected StructureClose ${r}`);if(t.length>0)return{matched:!0,start:t,end:o}}return{matched:!1,highlight:o}}return null}const K=Z.sU.define({create:()=>c.NZ.none,update(e,t){if(!t.docChanged&&!t.selection)return e;const r=[],n=t.state.facet(D);for(const e of t.state.selection.ranges){if(!e.empty)continue;const o=E(t.state,e.head,1)??E(t.state,e.head,-1);o&&(o.matched?(o.start.map((e=>r.push(N.range(e.from,e.to)))),o.end?r.push(N.range(o.end.from,o.end.to)):n.showEof&&r.push(V.range(t.state.doc.length))):r.push(Y.range(o.highlight.from,o.highlight.to)))}return c.NZ.set(r,!0)},provide:e=>c.Lz.decorations.from(e)});class L extends c.xO{toDOM(){const e=document.createElement("span");e.classList.add("cm-placeholder");const t=e.appendChild(document.createElement("div"));t.classList.add("spinner-border","spinner-border-sm"),t.hidden=!0;const r=e.appendChild(document.createElement("i"));return r.ariaHidden="true",r.classList.add("cm-compress-button","bi","bi-file-zip"),r.style.cursor="pointer",e}updateDOM(e,t){const r=t.state.facet(B.compressing);return e.querySelector(".spinner-border").hidden=!r,e.querySelector(".cm-compress-button").hidden=r,!0}ignoreEvent(){return!1}}function j(e){const t=[];for(const{from:r,to:n}of e.visibleRanges)(0,i.mv)(e.state).iterate({from:r,to:n,enter(r){const n=e.state.sliceDoc(r.from,r.to);"String"==r.name&&/[^“„]$/.test(n)&&t.push(c.NZ.widget({widget:new L,side:1}).range(/["”]$/.test(n)&&n.length>1?r.to-1:r.to))}});return c.NZ.set(t)}class B{constructor(e,t){this.util=t,this.decorations=j(e)}update(e){this.decorations=j(e.view)}toggleCompression(e,t){if(e.state.facet(B.compressing))return!1;const r=(0,i.mv)(e.state).resolveInner(t,-1);if("String"==r.name){let t=e.state.sliceDoc(r.from,r.to);const n=t.endsWith("”");n||t.endsWith('"')||(t+='"');const o=t.slice(1,-1);return e.dispatch({effects:B.lock.reconfigure(Z.Nb.highest([c.Lz.editable.of(!1),B.compressing.of(!0)]))}),(n?this.util.decompress(o):this.util.compress(o)).then((t=>{e.dispatch({changes:{from:r.from,to:r.to,insert:n?`"${t}"`:`"${t}”`},effects:B.lock.reconfigure([])})})),!0}return!1}}function F(e){async function t(t,r){if("String"!=r.name)return null;const n=t.state.sliceDoc(r.from,r.to);if("”"==n.at(-1)){const t=await e.decompress(n.slice(1,-1)),r=document.createElement("div");return r.innerHTML=`<div class="card shadow"><div class="card-body">Compressed string: <code>${t}</code></div></div>`,r}return null}return[(0,c.Ux)((async(e,r)=>{const n=(0,i.mv)(e.state).resolve(r),o=await t(e,n);if(null!=o){const O=document.createElement("div");return O.appendChild(o),{pos:r,create:()=>({dom:O,update:async o=>{if(o.changes.touchesRange(n.from,n.to)){const n=o.changes.mapPos(r,-1,Z.iR.TrackDel);if(null!=n){const r=await t(e,(0,i.mv)(e.state).resolve(n));null!=r&&O.replaceChildren(r)}}}})}}return null}))]}function M(e){return g.data.of({autocomplete:t=>y(e,t,!0)})}B.lock=new Z.xx,B.compressing=Z.sj.define({combine:e=>!!e.length&&e[0]}),B.spec={decorations:e=>e.decorations,eventHandlers:{click:function(e,t){const r=e.target;return!!r.classList.contains("cm-compress-button")&&this.toggleCompression(t,t.posAtDOM(r))}},provide:()=>B.lock.of([])};const X=[O.Nb.high(O.w4.of([{key:"Ctrl-Enter",run:e=>!(e.state.doc.length<=0)&&(window.dispatchEvent(new Event("run-vyxal")),!0),preventDefault:!0}])),a.V0,(0,R.yU)(),(0,c.$K)(),(0,c.dz)(),(0,c.Wu)(),c.Lz.theme({"&":{height:"100%"},"&.cm-focused":{outline:"none"},".cm-scroller":{overflow:"auto"},".cm-tooltip":{"z-index":"400 !important"}})],J={[x.Sx.Dark]:s.Ts,[x.Sx.Light]:C.al};function H({error:e,resetErrorBoundary:t}){return(0,n.jsxs)(W.A,{direction:"vertical",className:"bg-danger-subtle p-2 position-absolute",children:[(0,n.jsxs)("h3",{className:"text-danger",children:[(0,n.jsx)("i",{className:"bi bi-x-circle"})," An error occured"]}),(0,n.jsx)(q.A,{variant:"danger",onClick:t,children:"Reset editor"}),e.toString(),(0,n.jsx)("div",{children:e.stack})]})}function G({utilWorker:e,initialValue:t,children:r,setCode:a,settings:s,literate:i,claimFocus:l,autoFocus:m,height:u}){const d=(0,o.useContext)(I.i),P=(0,o.useRef)(null),p=(0,o.useCallback)((e=>{a(e)}),[a]),[f,h]=(0,o.useState)(null),g=(0,o.useMemo)((()=>c.S7.of((()=>{const e=document.createElement("div");return e.classList.add("p-1"),h(e),{dom:e,top:!0}}))),[]),S=(0,o.useMemo)((()=>c.Lz.focusChangeEffect.of(((e,t)=>(t&&P.current&&l(P.current),null)))),[l]),$=(0,o.useMemo)((()=>{return i?[k,M(d),w(d,!0)]:[_,Q(d),F(e),w(d,!1),(t=e,c.Z9.define((e=>new B(e,t)),B.spec))];var t}),[d,i,e]),v=[X,g,S,$,(0,o.useMemo)((()=>{return"no"!=s.highlightBrackets?(e={showEof:"yes-eof"==s.highlightBrackets},[D.of(e),z,K]):[];var e}),[s])];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(A.tH,{FallbackComponent:H,children:[(0,n.jsx)(O.Ay,{basicSetup:!1,theme:J[s.theme],value:t,onChange:p,extensions:v,ref:P,autoFocus:m,style:{height:u}}),null!==f&&(0,T.createPortal)(r,f)]})})}}}]);
//# sourceMappingURL=../maps/editor.df8e1271.js.map