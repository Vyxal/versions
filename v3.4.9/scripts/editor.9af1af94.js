(self.webpackChunkvyxal_github_io=self.webpackChunkvyxal_github_io||[]).push([[8],{6575:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var n=r(4848),o=r(6540),a=r(4618),s=r(6363),l=r(9946),i=r(5874),c=r(1371),O=r(5338),d=r(8010),u=r(3720),m=r(8820);const $=m.U1.deserialize({version:14,states:"!QOVQPOOOOQO'#Ci'#CiOOQO'#Ch'#ChOOQO'#Cl'#ClOOQO'#C_'#C_OOQO'#Ct'#CtQVQPOOOOQO-E6r-E6r",stateData:"!g~OPOS~OSSOTSOUSOVSOWSOXSOYSOZSO^PO_QOaRObROcROdSOeSOfSOgSOkPOlQO~OPg~",goto:"|iPPPjPPPPPPPPnrPPnPPPPPPPvTTOUTSOUTQOUQUORVU",nodeNames:"⚠ Space Program Statement Digraph SugarTrigraph SyntaxTrigraph StructureOpen StructureClose ListStuff Modifier VariableThing Number NumberDecimal NumberPart TwoCharNumber AnyString String SingleCharString TwoCharString Branch ContextIndex Comment Element",maxTerm:28,skippedNodes:[0,1],repeatNodeCount:1,tokenData:"7m~R#wOX)lX^)q^p)lpq)qqr)lrs+]st-otw)lwx2ixy2Ryz3Sz!O)l!O!P3X!P!Q3^!Q!R3c!R![3h![!})l!}#O2R#O#P)l#P#Q3S#Q#_)l#_#`3p#`#o)l#o#p2R#p#q4U#q#r3S#r#s4Z#s#y)l#y#z)q#z$f)l$f$g)q$g$j)l$j$k5o$k${)l${$|2R$|%V)l%V%W3^%W%v)l%v%w3p%w&b)l&b&c3p&c'm)l'm'n5|'n){)l){)|2R)|5a)l5a5b2R5b5s)l5s5t2R5t6s)l6s6t3^6t8T)l8T8U3^8U8{)l8{8|3^8|#BY)l#BY#BZ)q#BZ$9g)l$9g$9h3^$9h$9i3^$9i$9s)l$9s$9t3^$9t$9v)l$9v$9w3^$9w$9x3^$9x$9{)l$9{$9|3^$9|$9}3^$9}$:O3^$:O$:T)l$:T$:U3^$:U$:V3^$:V$:W)l$:W$:X3^$:X$:[)l$:[$:]3^$:]$:^3^$:^$:_3^$:_$:a)l$:a$:b3^$:b$:c3^$:c$:d)l$:d$:e3^$:e$:g)l$:g$:h3^$:h$;t)l$;t$;u3^$;u$;x)l$;x$;y3^$;y$;|)l$;|$;}3^$;}$<Q)l$<Q$<R3^$<R$<S)l$<S$<T3^$<T$<])l$<]$<^3^$<^$<_6R$<_$<e)l$<e$<f3^$<f$>Y)l$>Y$>Z2R$>Z$?f)l$?f$?g2R$?g$IS)l$IS$I_)q$I_$Iq)l$Is$I|)l$I|$JO)q$JO$JT)l$JT$JU)q$JU$KV)l$KV$KW)q$KW$Kw)l$Kw$Kx3^$Kx$L})l$L}$MO2R$MO%&`)l%&`%&a3p%&a%'P)l%'P%'Q3^%'Q%'R3^%'R%GS)l%GS%GT2R%GT&;p)l&;p&;q3^&;q&FU)l&FU&FV)q&FV;'S)l;'S;=`7g<%lO)l~)qOg~~)xYP~g~X^*hpq*h#y#z*h$f$g*h#BY#BZ*h$IS$I_*h$I|$JO*h$JT$JU*h$KV$KW*h&FU&FV*h~*mYP~X^*hpq*h#y#z*h$f$g*h#BY#BZ*h$IS$I_*h$I|$JO*h$JT$JU*h$KV$KW*h&FU&FV*h~+`]Or+]rs,Xs#O+]#O#P,^#P$Ip+]$Ip$Iq,X$Iq$Ir,X$Ir$Is,X$Is;'S+];'S;=`-i<%l~+]~O+]~~,X~,^Oa~~,aRO;'S+];'S;=`,j;=`O+]~,m^Or+]rs,Xs#O+]#O#P,^#P$Ip+]$Ip$Iq,X$Iq$Ir,X$Ir$Is,X$Is;'S+];'S;=`-i;=`<%l+]<%l~+]~O+]~~,X~-lP;=`<%l+]~-rhOq/^rs/^st/ctu/zu|/^|}0f}!O/^!O!P0f!P![/^![!]1R!]!_/^!_!`/z!`!a/z!a!b/^!c!}/^!}#O2^#O#P/^#P#Q2^#Q#R0f#R#o/^#o#p2R#p;'S/^;'S;=`2c<%lO/^~/cOS~~/hSf~OY/cZ;'S/c;'S;=`/t<%lO/c~/wP;=`<%l/c~/}Q!c!}0T#T#o0T~0YSZ~!Q![0T!c!}0T#R#S0T#T#o0T~0kRS~O;'S0t;'S;=`0y;=`O0t~0yOT~~1OPT~;=`<%l0t~1UVO![1k![!]1p!]!}1k!}#O/z#O;'S1k;'S;=`2W<%lO1k~1pOU~~1uSU~{|2R!g!h2R!o!p2R!t!u2R~2WOV~~2ZP;=`<%l1k~2cOX~~2fP;=`<%l/^~2lRO;'S2u;'S;=`2z;=`O2u~2zOb~~3PPb~;=`<%l2u~3XOW~~3^Ok~~3cOY~~3hO^~~3mP^~!Q![3h~3sRO;'S/^;'S;=`3|;=`O/^~4RPS~;=`<%l/^~4ZOd~~4^RO;'S4g;'S;=`5Q;=`O4g~4jRO;'S4s;'S;=`4x;=`O4s~4xO_~~4}P_~;=`<%l4s~5TSO;'S4s;'S;=`4x;=`<%l5a<%lO4s~5fR_~O;'S4s;'S;=`4x;=`O4s~5tPg~!Q![5w~5|Oe~~6ROl~~6URO;'S6_;'S;=`6x;=`O6_~6bRO;'S6k;'S;=`6p;=`O6k~6pOc~~6uPc~;=`<%l6k~6{SO;'S6k;'S;=`6p;=`<%l7X<%lO6k~7^Rc~O;'S6k;'S;=`6p;=`O6k~7jP;=`<%l)l",tokenizers:[0],topRules:{Program:[0,2]},tokenPrec:66}),h=i.bj.define({parser:$.configure({props:[(0,u.pn)({Digraph:u._A.function(u._A.propertyName),SugarTrigraph:u._A.macroName,SyntaxTrigraph:u._A.operator,StructureOpen:u._A.bracket,StructureClose:u._A.bracket,ListStuff:u._A.bracket,Modifier:u._A.moduleKeyword,VariableThing:u._A.variableName,String:u._A.string,SingleCharString:u._A.special(u._A.string),TwoCharString:u._A.special(u._A.string),"Number!":u._A.number,TwoCharNumber:u._A.special(u._A.number),Branch:u._A.punctuation,ContextIndex:u._A.controlKeyword,Comment:u._A.comment,Element:u._A.keyword})]})}),f={__proto__:null,"yes?":10,"?":12,if:14,for:16,"for<":18,"do-to-each":20,"each-as":22,while:24,"while<":26,"exists<":28,"relation<":30,"generate-from<":32,"generate<":34,endfor:36,"end-for":38,endwhile:40,"end-while":42,endlambda:44,"end-lambda":46,end:48,"end-end":50,"end-all":52,"close-all":54,"}":56,"->":60,"else:":62,else:64,elif:66,"else-if":68,body:70,do:72,branch:74,then:76,in:78,using:80,"no?":82,"=>":84,from:86,as:88,with:90,given:92,":and:":94,has:96,does:98,on:100,",":102,lambda:106,lam:108,"map-lambda":110,"map-lam":112,"map<":114,"filter-lambda":116,"filter-lam":118,"filter<":120,"reduce-lambda":122,"reduce-lam":124,"reduce<":126,"fold-lambda":128,"fold-lam":130,"fold<":132,"sort-lambda":134,"sort-lam":136,"sort<":138,"{":140},P=m.U1.deserialize({version:14,states:"!^OQOPOOOOOO'#C^'#C^OOOO'#D}'#D}QQOPOOOOOO'#C_'#C_O%qOPO'#C_OOOO'#Cy'#CyOOOO'#Db'#DbOOOO-E7{-E7{OOOO,58y,58y",stateData:"%}~OTSOUSOVSOWSOXSOYSOZSO[SO]SO^SO_SO`TObSOcSOdSOeSOfSOgSOhSOiSOjSOkSOlSOnUOoUOpUOqUOrUOsUOtUOuUOvUOwUOxUOyUOzUO{UO|UO}UO!OUO!PUO!QUO!RUO!SUO!TUO!VVO!WVO!XVO!YVO!ZVO![VO!]VO!^VO!_VO!`VO!aVO!bVO!cVO!dVO!eVO!fVO!gVO!hVO!iPO!jPO!kPO!lPO!mPO!nPO!oPO!pPO~OaXO~O!l!k!o!jS!o~",goto:"#R!rPP!s!wPPPPPPPPPPPPPPPPPPPPPPPPP!wPPPPPPPPPPPPPPPPPPPPPP!wPPPPPPPPPPPPPPPPPPPPPPPPPP!{TQORTPORQRORWR",nodeNames:"⚠ Program Word Structure WeirdKW yes? ? if for for< do-to-each each-as while while< exists< relation< generate-from< generate< endfor end-for endwhile end-while endlambda end-lambda end end-end end-all close-all } Branch -> else: else elif else-if body do branch then in using no? => from as with given :and: has does on , Lambda lambda lam map-lambda map-lam map< filter-lambda filter-lam filter< reduce-lambda reduce-lam reduce< fold-lambda fold-lam fold< sort-lambda sort-lam sort< { String Number Element Modifier VariableThing ListStuff GroupStuff Comment",maxTerm:80,skippedNodes:[0,4],repeatNodeCount:1,tokenData:",q~Rars!Wst$^tu${xy%gyz%x}!O&e!O!P'k!Q!R'k!R!['p![!]'x!a!b&e!c!}(_!}#O+a#P#Q+a#T#](_#]#^+f#^#o(_~!ZZOr!Wrs!|s#O!W#O#P#R#P$Ip!W$Ip$Iq!|$Iq$Ir!|$Ir$Is!|$Is;'S!W;'S;=`$W<%lO!W~#RO!i~~#URO;'S!W;'S;=`#_;=`O!W~#b[Or!Wrs!|s#O!W#O#P#R#P$Ip!W$Ip$Iq!|$Iq$Ir!|$Ir$Is!|$Is;'S!W;'S;=`$W;=`<%l!W<%lO!W~$ZP;=`<%l!W~$aPst$d~$iS!p~OY$dZ;'S$d;'S;=`$u<%lO$d~$xP;=`<%l$d~%OQ!c!}%U#T#o%U~%ZS!m~!Q![%U!c!}%U#R#S%U#T#o%U~%lS!o~|}%x!O!P%x![!]%}!]!^&Y~%}O!o~~&SQ!o~!O!P%x![!]%x~&_Q!o~|}%x!]!^%x~&j^S~qr&euv&evw&ez{&e{|&e}!O&e!Q![&e![!]'f!^!_&e!_!`&e!`!a&e!a!b&e!c!}&e#T#o&e~'kOS~~'pO!j~~'uP!j~!Q!['p~'{Q!_!`(R!`!a${~(UR!c!}%U!}#O${#T#o%U~(f`!k~S~qr(_uv(_vw(_z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_~)oO!l~S~~)va!k~S~qr(_uv(_vw(_wx*{z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_~+OP#h#i+R~+WP!k~#b#c+Z~+^Pwx*{~+fO!n~~+o`!k~!j~S~qr(_uv(_vw(_z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_",tokenizers:[0],topRules:{Program:[0,1]},specialized:[{term:4,get:e=>f[e]||-1}],tokenPrec:222}),S=i.bj.define({parser:P.configure({props:[(0,u.pn)({Structure:u._A.controlKeyword,Branch:u._A.controlKeyword,Lambda:u._A.controlKeyword,String:u._A.string,Number:u._A.number,Element:u._A.keyword,Modifier:u._A.moduleKeyword,VariableThing:u._A.variableName,ListStuff:u._A.literal,GroupStuff:u._A.keyword,Comment:u._A.comment})]})}),p=/[a-zA-Z-?!*+=&%<>][a-zA-Z0-9-?!*+=&%<>:]*/,g=new RegExp(`( |^)${p.source}`);function _(e,t){return{label:t&&"syntax"!=e.type?e.keywords[0]??"<error>":e.symbol,detail:e.name,info(){const t=document.createElement("div"),r=(0,O.H)(t);return r.render((0,d.H)({thing:e})),{dom:t,destroy(){setTimeout((()=>r.unmount()))}}},type:"element"==e.type?"method":"keyword"}}function b(e,t,r){const n=t.matchBefore(r?p:g);if(null!=n){const t=e.search(n.text.trimStart());return t.length?{from:n.from,filter:!1,options:t.map((e=>({..._(e.item,r),boost:10*(1-(e.score??0))}))),update:(t,n,o,a)=>b(e,a,r)}:null}return null}async function w(e,t,r){const n=b(e.fuse,t,r);return null!=n?Promise.resolve(n):t.explicit?{from:t.pos,to:t.pos,filter:!1,options:[...e.elements.values()].map((e=>_(e,r))),update:(t,n,o,a)=>b(e.fuse,a,r)}:Promise.resolve(null)}function y(e,t){return(0,c.Ux)(((r,n)=>{const o=(0,i.mv)(r.state).resolve(n,1),a=r.state.doc.sliceString(o.from,o.to);let s;if("Element"==o.name||"Digraph"==o.name||"Modifier"==o.name)s=("Modifier"==o.name?t?e.modifiersByKeyword:e.modifiers:t?e.elementsByKeyword:e.elements).get(a);else{if(!e.syntax.has(a))return null;s=e.syntax.get(a)}return void 0!==s?{pos:n,create(){const e=document.createElement("div"),t=(0,d.H)({thing:s,shadow:!0}),r=(0,O.H)(e);return r.render(t),{dom:e,destroy(){setTimeout((()=>r.unmount()))}}}}:null}))}const x=new i.Yy(h),R=new i.Yy(S);function k(e){return h.data.of({autocomplete(t){const r=t.matchBefore(/#[,.^](.)/);if(null!=r){const t=e.sugars.get(r.text);if("string"==typeof t)return Promise.resolve({from:r.from,filter:!1,options:[{label:t,detail:"sugar trigraph",type:"constant"}]})}return w(e,t,!1)}})}var v=r(7404),U=r(2323),T=r(3343),C=r(7656),I=r(961),Q=r(7665),V=r(5605),A=r(5615),W=r(6585);const q=c.Lz.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"},"&:not(.cm-focused) .cm-eofMarker":{display:"none"},".cm-eofMarker":{display:"inline"}}),z=c.NZ.mark({class:"cm-matchingBracket"}),Z=c.NZ.mark({class:"cm-nonmatchingBracket"});class N extends c.xO{eq(){return!0}toDOM(){const e=document.createElement("span");return e.classList.add("cm-eofMarker"),e.classList.add("cm-placeholder"),e.classList.add("cm-matchingBracket"),e.textContent="␄",e}}const E=c.NZ.widget({widget:new N,side:1}),j=W.sj.define({combine:e=>(0,W.QR)(e,{showEof:!1})});function B(e,t,r){const n=(0,i.mv)(e),o=n.resolveInner(t,r);if("StructureOpen"==o.type.name){const a=n.cursorAt(t,r);let s=0;do{if("StructureClose"==a.name){const t=e.doc.sliceString(a.from,a.to);if("}"==t?s--:")"==t?s-=2:"]"==t&&(s=0),s<=0)return{matched:!0,start:[o],end:a.node}}else"StructureOpen"==a.name&&s++}while(a.next(!0));return{matched:!0,start:[o],end:null}}if("StructureClose"==o.type.name){let t=[];n.iterate({enter(r){if("StructureClose"==r.name){const n=e.doc.sliceString(r.from,r.to);"}"==n?t.pop():")"==n?t.splice(t.length-2):"]"==n&&(t=[])}else"StructureOpen"==r.name&&t.push(r.node)},from:0,to:o.from-1});const r=e.doc.sliceString(o.from,o.to);if("}"==r){if(t.length>=1)return{matched:!0,start:[t.pop()],end:o}}else if(")"==r){if(t.length>=2)return{matched:!0,start:t.splice(t.length-2),end:o}}else{if("]"!=r)throw new Error(`Unexpected StructureClose ${r}`);if(t.length>0)return{matched:!0,start:t,end:o}}return{matched:!1,highlight:o}}return null}const X=W.sU.define({create:()=>c.NZ.none,update(e,t){if(!t.docChanged&&!t.selection)return e;const r=[],n=t.state.facet(j);for(const e of t.state.selection.ranges){if(!e.empty)continue;const o=B(t.state,e.head,1)??B(t.state,e.head,-1);o&&(o.matched?(o.start.map((e=>r.push(z.range(e.from,e.to)))),o.end?r.push(z.range(o.end.from,o.end.to)):n.showEof&&r.push(E.range(t.state.doc.length))):r.push(Z.range(o.highlight.from,o.highlight.to)))}return c.NZ.set(r,!0)},provide:e=>c.Lz.decorations.from(e)});class L extends c.xO{eq(){return!0}toDOM(){const e=document.createElement("i");return e.ariaHidden="true",e.classList.add("cm-compress-button"),e.classList.add("cm-placeholder"),e.classList.add("bi"),e.classList.add("bi-file-zip"),e.style.cursor="pointer",e}ignoreEvent(){return!1}}function K(e){const t=[];for(const{from:r,to:n}of e.visibleRanges)(0,i.mv)(e.state).iterate({from:r,to:n,enter(r){const n=e.state.sliceDoc(r.from,r.to);"String"==r.name&&/[^“„]$/.test(n)&&t.push(c.NZ.widget({widget:new L,side:1}).range(/["”]$/.test(n)&&n.length>1?r.to-1:r.to))}});return c.NZ.set(t)}function D(e){async function t(t,r){if("String"!=r.name)return null;const n=t.state.sliceDoc(r.from,r.to);if("”"==n.at(-1)){const t=await e.decompress(n.slice(1,-1)),r=document.createElement("div");return r.innerHTML=`<div class="card shadow"><div class="card-body">Compressed string: <code>${t}</code></div></div>`,r}return null}return[(0,c.Ux)((async(e,r)=>{const n=(0,i.mv)(e.state).resolve(r),o=await t(e,n);if(null!=o){const a=document.createElement("div");return a.appendChild(o),{pos:r,create:()=>({dom:a,update:async o=>{if(o.changes.touchesRange(n.from,n.to)){const n=o.changes.mapPos(r,-1,W.iR.TrackDel);if(null!=n){const r=await t(e,(0,i.mv)(e.state).resolve(n));null!=r&&a.replaceChildren(r)}}}})}}return null}))]}function M(e){return S.data.of({autocomplete:t=>w(e,t,!0)})}const Y=[a.Nb.high(a.w4.of([{key:"Ctrl-Enter",run:e=>!(e.state.doc.length<=0)&&(window.dispatchEvent(new Event("run-vyxal")),!0),preventDefault:!0}])),s.V0,(0,v.yU)(),(0,c.$K)(),(0,c.dz)(),(0,c.Wu)(),c.Lz.theme({"&":{height:"100%"},"&.cm-focused":{outline:"none"},".cm-scroller":{overflow:"auto"},".cm-tooltip":{"z-index":"400 !important"}})],F={[U.Sx.Dark]:l.Ts,[U.Sx.Light]:T.al};function J({error:e,resetErrorBoundary:t}){return(0,n.jsxs)(V.A,{direction:"vertical",className:"bg-danger-subtle p-2 position-absolute",children:[(0,n.jsxs)("h3",{className:"text-danger",children:[(0,n.jsx)("i",{className:"bi bi-x-circle"})," An error occured"]}),(0,n.jsx)(A.A,{variant:"danger",onClick:t,children:"Reset editor"}),e.toString(),(0,n.jsx)("div",{children:e.stack})]})}function H({utilWorker:e,code:t,ratio:r,children:s,setCode:l,settings:O,literate:d,claimFocus:u,autoFocus:m}){const $=(0,o.useContext)(C.i),h=(0,o.useRef)(null),f=(0,o.useCallback)((e=>{l(e)}),[]),[P,S]=(0,o.useState)(null),p=(0,o.useMemo)((()=>c.S7.of((()=>{const e=document.createElement("div");return e.classList.add("p-1"),S(e),{dom:e,top:!0}}))),[]),g=(0,o.useMemo)((()=>c.Lz.focusChangeEffect.of(((e,t)=>(t&&h.current&&u(h.current),null)))),[]),_=(0,o.useMemo)((()=>{return d?[R,M($),y($,!0)]:[x,k($),D(e),y($,!1),(t=e,c.Z9.fromClass(class{constructor(e){this.decorations=K(e)}update(e){(e.docChanged||e.viewportChanged||(0,i.mv)(e.startState)!=(0,i.mv)(e.state))&&(this.decorations=K(e.view))}},{decorations:e=>e.decorations,eventHandlers:{click:(e,r)=>{const n=e.target;return!!n.classList.contains("cm-compress-button")&&function(e,t,r){if("String"==r.name){let n=t.state.sliceDoc(r.from,r.to);const o=n.endsWith("”");o||n.endsWith('"')||(n+='"');const a=n.slice(1,-1);return(o?e.decompress(a):e.compress(a).then((e=>e.slice(1,-1)))).then((e=>{t.dispatch({changes:{from:r.from,to:r.to,insert:o?`"${e}"`:`"${e}”`}})})),!0}return!1}(t,r,(0,i.mv)(r.state).resolveInner(r.posAtDOM(n),-1))}}}))];var t}),[d,e]),b=[Y,p,g,_,(0,o.useMemo)((()=>{return"no"!=O.highlightBrackets?(e={showEof:"yes-eof"==O.highlightBrackets},[j.of(e),q,X]):[];var e}),[O])];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(Q.tH,{FallbackComponent:J,children:[(0,n.jsx)(a.Ay,{basicSetup:!1,theme:F[O.theme],value:t,style:{height:r},onChange:f,extensions:b,ref:h,autoFocus:m}),null!==P&&(0,I.createPortal)(s,P)]})})}}}]);
//# sourceMappingURL=../maps/editor.9af1af94.js.map