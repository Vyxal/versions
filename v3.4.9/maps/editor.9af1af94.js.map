{"version":3,"file":"scripts/editor.9af1af94.js","mappings":"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","sources":["webpack:///./src/common/scripts/language/vyxal.grammar","webpack:///./src/common/scripts/language/vyxal.ts","webpack:///./src/common/scripts/language/vyxal-lit.grammar","webpack:///./src/common/scripts/language/vyxal-lit.ts","webpack:///./src/latest/scripts/language/common.ts","webpack:///./src/latest/scripts/language/sbcs/autocomplete.ts","webpack:///./src/latest/scripts/language/sbcs/bracket-matching.ts","webpack:///./src/latest/scripts/language/sbcs/compression.ts","webpack:///./src/latest/scripts/language/sbcs/tooltips.ts","webpack:///./src/latest/scripts/language/literate/autocomplete.ts","webpack:///./src/latest/scripts/ui/Editor.tsx"],"sourcesContent":["// This file was generated by lezer-generator. You probably shouldn't edit it.\nimport {LRParser} from \"@lezer/lr\"\nexport const __parser = LRParser.deserialize({\n  version: 14,\n  states: \"!QOVQPOOOOQO'#Ci'#CiOOQO'#Ch'#ChOOQO'#Cl'#ClOOQO'#C_'#C_OOQO'#Ct'#CtQVQPOOOOQO-E6r-E6r\",\n  stateData: \"!g~OPOS~OSSOTSOUSOVSOWSOXSOYSOZSO^PO_QOaRObROcROdSOeSOfSOgSOkPOlQO~OPg~\",\n  goto: \"|iPPPjPPPPPPPPnrPPnPPPPPPPvTTOUTSOUTQOUQUORVU\",\n  nodeNames: \"⚠ Space Program Statement Digraph SugarTrigraph SyntaxTrigraph StructureOpen StructureClose ListStuff Modifier VariableThing Number NumberDecimal NumberPart TwoCharNumber AnyString String SingleCharString TwoCharString Branch ContextIndex Comment Element\",\n  maxTerm: 28,\n  skippedNodes: [0,1],\n  repeatNodeCount: 1,\n  tokenData: \"7m~R#wOX)lX^)q^p)lpq)qqr)lrs+]st-otw)lwx2ixy2Ryz3Sz!O)l!O!P3X!P!Q3^!Q!R3c!R![3h![!})l!}#O2R#O#P)l#P#Q3S#Q#_)l#_#`3p#`#o)l#o#p2R#p#q4U#q#r3S#r#s4Z#s#y)l#y#z)q#z$f)l$f$g)q$g$j)l$j$k5o$k${)l${$|2R$|%V)l%V%W3^%W%v)l%v%w3p%w&b)l&b&c3p&c'm)l'm'n5|'n){)l){)|2R)|5a)l5a5b2R5b5s)l5s5t2R5t6s)l6s6t3^6t8T)l8T8U3^8U8{)l8{8|3^8|#BY)l#BY#BZ)q#BZ$9g)l$9g$9h3^$9h$9i3^$9i$9s)l$9s$9t3^$9t$9v)l$9v$9w3^$9w$9x3^$9x$9{)l$9{$9|3^$9|$9}3^$9}$:O3^$:O$:T)l$:T$:U3^$:U$:V3^$:V$:W)l$:W$:X3^$:X$:[)l$:[$:]3^$:]$:^3^$:^$:_3^$:_$:a)l$:a$:b3^$:b$:c3^$:c$:d)l$:d$:e3^$:e$:g)l$:g$:h3^$:h$;t)l$;t$;u3^$;u$;x)l$;x$;y3^$;y$;|)l$;|$;}3^$;}$<Q)l$<Q$<R3^$<R$<S)l$<S$<T3^$<T$<])l$<]$<^3^$<^$<_6R$<_$<e)l$<e$<f3^$<f$>Y)l$>Y$>Z2R$>Z$?f)l$?f$?g2R$?g$IS)l$IS$I_)q$I_$Iq)l$Is$I|)l$I|$JO)q$JO$JT)l$JT$JU)q$JU$KV)l$KV$KW)q$KW$Kw)l$Kw$Kx3^$Kx$L})l$L}$MO2R$MO%&`)l%&`%&a3p%&a%'P)l%'P%'Q3^%'Q%'R3^%'R%GS)l%GS%GT2R%GT&;p)l&;p&;q3^&;q&FU)l&FU&FV)q&FV;'S)l;'S;=`7g<%lO)l~)qOg~~)xYP~g~X^*hpq*h#y#z*h$f$g*h#BY#BZ*h$IS$I_*h$I|$JO*h$JT$JU*h$KV$KW*h&FU&FV*h~*mYP~X^*hpq*h#y#z*h$f$g*h#BY#BZ*h$IS$I_*h$I|$JO*h$JT$JU*h$KV$KW*h&FU&FV*h~+`]Or+]rs,Xs#O+]#O#P,^#P$Ip+]$Ip$Iq,X$Iq$Ir,X$Ir$Is,X$Is;'S+];'S;=`-i<%l~+]~O+]~~,X~,^Oa~~,aRO;'S+];'S;=`,j;=`O+]~,m^Or+]rs,Xs#O+]#O#P,^#P$Ip+]$Ip$Iq,X$Iq$Ir,X$Ir$Is,X$Is;'S+];'S;=`-i;=`<%l+]<%l~+]~O+]~~,X~-lP;=`<%l+]~-rhOq/^rs/^st/ctu/zu|/^|}0f}!O/^!O!P0f!P![/^![!]1R!]!_/^!_!`/z!`!a/z!a!b/^!c!}/^!}#O2^#O#P/^#P#Q2^#Q#R0f#R#o/^#o#p2R#p;'S/^;'S;=`2c<%lO/^~/cOS~~/hSf~OY/cZ;'S/c;'S;=`/t<%lO/c~/wP;=`<%l/c~/}Q!c!}0T#T#o0T~0YSZ~!Q![0T!c!}0T#R#S0T#T#o0T~0kRS~O;'S0t;'S;=`0y;=`O0t~0yOT~~1OPT~;=`<%l0t~1UVO![1k![!]1p!]!}1k!}#O/z#O;'S1k;'S;=`2W<%lO1k~1pOU~~1uSU~{|2R!g!h2R!o!p2R!t!u2R~2WOV~~2ZP;=`<%l1k~2cOX~~2fP;=`<%l/^~2lRO;'S2u;'S;=`2z;=`O2u~2zOb~~3PPb~;=`<%l2u~3XOW~~3^Ok~~3cOY~~3hO^~~3mP^~!Q![3h~3sRO;'S/^;'S;=`3|;=`O/^~4RPS~;=`<%l/^~4ZOd~~4^RO;'S4g;'S;=`5Q;=`O4g~4jRO;'S4s;'S;=`4x;=`O4s~4xO_~~4}P_~;=`<%l4s~5TSO;'S4s;'S;=`4x;=`<%l5a<%lO4s~5fR_~O;'S4s;'S;=`4x;=`O4s~5tPg~!Q![5w~5|Oe~~6ROl~~6URO;'S6_;'S;=`6x;=`O6_~6bRO;'S6k;'S;=`6p;=`O6k~6pOc~~6uPc~;=`<%l6k~6{SO;'S6k;'S;=`6p;=`<%l7X<%lO6k~7^Rc~O;'S6k;'S;=`6p;=`O6k~7jP;=`<%l)l\",\n  tokenizers: [0],\n  topRules: {\"Program\":[0,2]},\n  tokenPrec: 66\n})\n\nexport default __parser\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nexport const\n  Space = 1,\n  Program = 2,\n  Statement = 3,\n  Digraph = 4,\n  SugarTrigraph = 5,\n  SyntaxTrigraph = 6,\n  StructureOpen = 7,\n  StructureClose = 8,\n  ListStuff = 9,\n  Modifier = 10,\n  VariableThing = 11,\n  Number = 12,\n  NumberDecimal = 13,\n  NumberPart = 14,\n  TwoCharNumber = 15,\n  AnyString = 16,\n  String = 17,\n  SingleCharString = 18,\n  TwoCharString = 19,\n  Branch = 20,\n  ContextIndex = 21,\n  Comment = 22,\n  Element = 23\n","import { LRLanguage } from \"@codemirror/language\";\nimport { styleTags, tags } from \"@lezer/highlight\";\nimport parser from \"./vyxal.grammar\";\nexport const vyxalLanguage = LRLanguage.define({\n    parser: parser.configure({\n        props: [\n            styleTags({\n                Digraph: tags.function(tags.propertyName),\n                SugarTrigraph: tags.macroName,\n                SyntaxTrigraph: tags.operator,\n                StructureOpen: tags.bracket,\n                StructureClose: tags.bracket,\n                ListStuff: tags.bracket,\n                Modifier: tags.moduleKeyword,\n                VariableThing: tags.variableName,\n                String: tags.string,\n                SingleCharString: tags.special(tags.string),\n                TwoCharString: tags.special(tags.string),\n                \"Number!\": tags.number,\n                TwoCharNumber: tags.special(tags.number),\n                Branch: tags.punctuation,\n                ContextIndex: tags.controlKeyword,\n                Comment: tags.comment,\n                Element: tags.keyword,\n            }),\n        ],\n    }),\n});\n","// This file was generated by lezer-generator. You probably shouldn't edit it.\nimport {LRParser} from \"@lezer/lr\"\nconst spec_WeirdKW = {__proto__:null,\"yes?\":10, \"?\":12, if:14, for:16, \"for<\":18, \"do-to-each\":20, \"each-as\":22, while:24, \"while<\":26, \"exists<\":28, \"relation<\":30, \"generate-from<\":32, \"generate<\":34, endfor:36, \"end-for\":38, endwhile:40, \"end-while\":42, endlambda:44, \"end-lambda\":46, end:48, \"end-end\":50, \"end-all\":52, \"close-all\":54, \"}\":56, \"->\":60, \"else:\":62, else:64, elif:66, \"else-if\":68, body:70, do:72, branch:74, then:76, in:78, using:80, \"no?\":82, \"=>\":84, from:86, as:88, with:90, given:92, \":and:\":94, has:96, does:98, on:100, \",\":102, lambda:106, lam:108, \"map-lambda\":110, \"map-lam\":112, \"map<\":114, \"filter-lambda\":116, \"filter-lam\":118, \"filter<\":120, \"reduce-lambda\":122, \"reduce-lam\":124, \"reduce<\":126, \"fold-lambda\":128, \"fold-lam\":130, \"fold<\":132, \"sort-lambda\":134, \"sort-lam\":136, \"sort<\":138, \"{\":140}\nexport const __parser = LRParser.deserialize({\n  version: 14,\n  states: \"!^OQOPOOOOOO'#C^'#C^OOOO'#D}'#D}QQOPOOOOOO'#C_'#C_O%qOPO'#C_OOOO'#Cy'#CyOOOO'#Db'#DbOOOO-E7{-E7{OOOO,58y,58y\",\n  stateData: \"%}~OTSOUSOVSOWSOXSOYSOZSO[SO]SO^SO_SO`TObSOcSOdSOeSOfSOgSOhSOiSOjSOkSOlSOnUOoUOpUOqUOrUOsUOtUOuUOvUOwUOxUOyUOzUO{UO|UO}UO!OUO!PUO!QUO!RUO!SUO!TUO!VVO!WVO!XVO!YVO!ZVO![VO!]VO!^VO!_VO!`VO!aVO!bVO!cVO!dVO!eVO!fVO!gVO!hVO!iPO!jPO!kPO!lPO!mPO!nPO!oPO!pPO~OaXO~O!l!k!o!jS!o~\",\n  goto: \"#R!rPP!s!wPPPPPPPPPPPPPPPPPPPPPPPPP!wPPPPPPPPPPPPPPPPPPPPPP!wPPPPPPPPPPPPPPPPPPPPPPPPPP!{TQORTPORQRORWR\",\n  nodeNames: \"⚠ Program Word Structure WeirdKW yes? ? if for for< do-to-each each-as while while< exists< relation< generate-from< generate< endfor end-for endwhile end-while endlambda end-lambda end end-end end-all close-all } Branch -> else: else elif else-if body do branch then in using no? => from as with given :and: has does on , Lambda lambda lam map-lambda map-lam map< filter-lambda filter-lam filter< reduce-lambda reduce-lam reduce< fold-lambda fold-lam fold< sort-lambda sort-lam sort< { String Number Element Modifier VariableThing ListStuff GroupStuff Comment\",\n  maxTerm: 80,\n  skippedNodes: [0,4],\n  repeatNodeCount: 1,\n  tokenData: \",q~Rars!Wst$^tu${xy%gyz%x}!O&e!O!P'k!Q!R'k!R!['p![!]'x!a!b&e!c!}(_!}#O+a#P#Q+a#T#](_#]#^+f#^#o(_~!ZZOr!Wrs!|s#O!W#O#P#R#P$Ip!W$Ip$Iq!|$Iq$Ir!|$Ir$Is!|$Is;'S!W;'S;=`$W<%lO!W~#RO!i~~#URO;'S!W;'S;=`#_;=`O!W~#b[Or!Wrs!|s#O!W#O#P#R#P$Ip!W$Ip$Iq!|$Iq$Ir!|$Ir$Is!|$Is;'S!W;'S;=`$W;=`<%l!W<%lO!W~$ZP;=`<%l!W~$aPst$d~$iS!p~OY$dZ;'S$d;'S;=`$u<%lO$d~$xP;=`<%l$d~%OQ!c!}%U#T#o%U~%ZS!m~!Q![%U!c!}%U#R#S%U#T#o%U~%lS!o~|}%x!O!P%x![!]%}!]!^&Y~%}O!o~~&SQ!o~!O!P%x![!]%x~&_Q!o~|}%x!]!^%x~&j^S~qr&euv&evw&ez{&e{|&e}!O&e!Q![&e![!]'f!^!_&e!_!`&e!`!a&e!a!b&e!c!}&e#T#o&e~'kOS~~'pO!j~~'uP!j~!Q!['p~'{Q!_!`(R!`!a${~(UR!c!}%U!}#O${#T#o%U~(f`!k~S~qr(_uv(_vw(_z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_~)oO!l~S~~)va!k~S~qr(_uv(_vw(_wx*{z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_~+OP#h#i+R~+WP!k~#b#c+Z~+^Pwx*{~+fO!n~~+o`!k~!j~S~qr(_uv(_vw(_z{(_{|(_}!O(_!Q![(_![!])h!^!_(_!_!`(_!`!a(_!a!b(_!c!}(_#T#b(_#b#c)o#c#o(_\",\n  tokenizers: [0],\n  topRules: {\"Program\":[0,1]},\n  specialized: [{term: 4, get: (value) => spec_WeirdKW[value] || -1}],\n  tokenPrec: 222\n})\n\nexport default __parser\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nexport const\n  Program = 1,\n  Word = 2,\n  Structure = 3,\n  WeirdKW = 4,\n  _if = 7,\n  _for = 8,\n  _while = 12,\n  endfor = 18,\n  endwhile = 20,\n  endlambda = 22,\n  end = 24,\n  Branch = 29,\n  _else = 32,\n  elif = 33,\n  body = 35,\n  _do = 36,\n  branch = 37,\n  then = 38,\n  _in = 39,\n  using = 40,\n  from = 43,\n  as = 44,\n  _with = 45,\n  given = 46,\n  has = 48,\n  does = 49,\n  on = 50,\n  Lambda = 52,\n  lambda = 53,\n  lam = 54,\n  String = 71,\n  Number = 72,\n  Element = 73,\n  Modifier = 74,\n  VariableThing = 75,\n  ListStuff = 76,\n  GroupStuff = 77,\n  Comment = 78\n","import { LRLanguage } from \"@codemirror/language\";\nimport { styleTags, tags } from \"@lezer/highlight\";\nimport parser from \"./vyxal-lit.grammar\";\nexport const vyxalLitLanguage = LRLanguage.define({\n    parser: parser.configure({\n        props: [\n            styleTags({\n                Structure: tags.controlKeyword,\n                Branch: tags.controlKeyword,\n                Lambda: tags.controlKeyword,\n                String: tags.string,\n                Number: tags.number,\n                Element: tags.keyword,\n                Modifier: tags.moduleKeyword,\n                VariableThing: tags.variableName,\n                ListStuff: tags.literal,\n                GroupStuff: tags.keyword,\n                Comment: tags.comment,\n            }),\n        ],\n    }),\n});\n","import { LanguageSupport, syntaxTree } from \"@codemirror/language\";\nimport { hoverTooltip } from \"@codemirror/view\";\nimport { createRoot } from \"react-dom/client\";\nimport { ThingCard } from \"../ui/ThingCard\";\nimport { vyxalLanguage } from \"../../../common/scripts/language/vyxal\";\nimport { vyxalLitLanguage } from \"../../../common/scripts/language/vyxal-lit\";\nconst KEYWORD = /[a-zA-Z-?!*+=&%<>][a-zA-Z0-9-?!*+=&%<>:]*/;\nconst PREFIXED_KEYWORD = new RegExp(`( |^)${KEYWORD.source}`);\nfunction elementCompletion(thing, literate) {\n    return {\n        label: literate && thing.type != \"syntax\" ? thing.keywords[0] ?? \"<error>\" : thing.symbol,\n        detail: thing.name,\n        info() {\n            const container = document.createElement(\"div\");\n            const root = createRoot(container);\n            root.render(ThingCard({ thing }));\n            return {\n                dom: container,\n                destroy() {\n                    setTimeout(() => root.unmount());\n                },\n            };\n        },\n        type: thing.type == \"element\" ? \"method\" : \"keyword\",\n    };\n}\nfunction syncElementAutocomplete(fuse, context, literate) {\n    const word = context.matchBefore(literate ? KEYWORD : PREFIXED_KEYWORD);\n    if (word != null) {\n        const results = fuse.search(word.text.trimStart());\n        if (!results.length) {\n            return null;\n        }\n        return {\n            from: word.from,\n            filter: false,\n            options: results.map((result) => ({ ...elementCompletion(result.item, literate), boost: 10 * (1 - (result.score ?? 0)) })),\n            update: (current, from, to, context) => syncElementAutocomplete(fuse, context, literate),\n        };\n    }\n    return null;\n}\nexport async function elementAutocomplete(elementData, context, literate) {\n    const sync = syncElementAutocomplete(elementData.fuse, context, literate);\n    if (sync != null) {\n        return Promise.resolve(sync);\n    }\n    if (context.explicit) {\n        return {\n            from: context.pos,\n            to: context.pos,\n            filter: false,\n            options: [...elementData.elements.values()].map((e) => elementCompletion(e, literate)),\n            update: (current, from, to, context) => syncElementAutocomplete(elementData.fuse, context, literate),\n        };\n    }\n    return Promise.resolve(null);\n}\nexport function elementTooltip(elementData, literate) {\n    return hoverTooltip((view, pos) => {\n        const node = syntaxTree(view.state).resolve(pos, 1);\n        const hovered = view.state.doc.sliceString(node.from, node.to);\n        let thing;\n        if (node.name == \"Element\" || node.name == \"Digraph\" || node.name == \"Modifier\") {\n            thing = (node.name == \"Modifier\" ? (literate ? elementData.modifiersByKeyword : elementData.modifiers) : (literate ? elementData.elementsByKeyword : elementData.elements)).get(hovered);\n        }\n        else if (elementData.syntax.has(hovered)) {\n            thing = elementData.syntax.get(hovered);\n        }\n        else {\n            return null;\n        }\n        if (thing !== undefined) {\n            return {\n                pos: pos,\n                create() {\n                    const container = document.createElement(\"div\");\n                    const card = ThingCard({ thing, shadow: true });\n                    const root = createRoot(container);\n                    root.render(card);\n                    return {\n                        dom: container,\n                        destroy() {\n                            setTimeout(() => root.unmount());\n                        },\n                    };\n                },\n            };\n        }\n        return null;\n    });\n}\nexport const vyxal = new LanguageSupport(vyxalLanguage);\nexport const vyxalLiterate = new LanguageSupport(vyxalLitLanguage);\n","import { elementAutocomplete } from \"../common\";\nimport { vyxalLanguage } from \"../../../../common/scripts/language/vyxal\";\nexport function vyxalCompletion(elementData) {\n    return vyxalLanguage.data.of({\n        autocomplete(context) {\n            const sugar = context.matchBefore(/#[,.^](.)/);\n            if (sugar != null) {\n                const desugared = elementData.sugars.get(sugar.text);\n                if (typeof desugared == \"string\") {\n                    return Promise.resolve({\n                        from: sugar.from,\n                        filter: false,\n                        options: [\n                            { label: desugared, detail: \"sugar trigraph\", type: \"constant\" },\n                        ],\n                    });\n                }\n            }\n            return elementAutocomplete(elementData, context, false);\n        },\n    });\n}\n","import { syntaxTree } from \"@codemirror/language\";\nimport { combineConfig, Facet, StateField } from \"@codemirror/state\";\nimport { Decoration, WidgetType } from \"@codemirror/view\";\nimport { EditorView } from \"codemirror\";\nconst theme = EditorView.baseTheme({\n    \"&.cm-focused .cm-matchingBracket\": { backgroundColor: \"#328c8252\" },\n    \"&.cm-focused .cm-nonmatchingBracket\": { backgroundColor: \"#bb555544\" },\n    \"&:not(.cm-focused) .cm-eofMarker\": { display: \"none\" },\n    \".cm-eofMarker\": { display: \"inline\" },\n});\nconst matchingMark = Decoration.mark({ class: \"cm-matchingBracket\" });\nconst nonmatchingMark = Decoration.mark({ class: \"cm-nonmatchingBracket\" });\nclass EOFWidget extends WidgetType {\n    eq() {\n        return true;\n    }\n    toDOM() {\n        const element = document.createElement(\"span\");\n        element.classList.add(\"cm-eofMarker\");\n        element.classList.add(\"cm-placeholder\");\n        element.classList.add(\"cm-matchingBracket\");\n        element.textContent = \"␄\";\n        return element;\n    }\n}\nconst eofWidget = Decoration.widget({\n    widget: new EOFWidget(),\n    side: 1,\n});\nconst bracketMatchingConfig = Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            showEof: false,\n        });\n    },\n});\nfunction matchBrackets(state, position, side) {\n    const tree = syntaxTree(state);\n    const startNode = tree.resolveInner(position, side);\n    if (startNode.type.name == \"StructureOpen\") {\n        const iter = tree.cursorAt(position, side);\n        let depth = 0;\n        do {\n            if (iter.name == \"StructureClose\") {\n                const closer = state.doc.sliceString(iter.from, iter.to);\n                if (closer == \"}\") {\n                    depth--;\n                }\n                else if (closer == \")\") {\n                    depth -= 2;\n                }\n                else if (closer == \"]\") {\n                    depth = 0;\n                }\n                if (depth <= 0) {\n                    return { matched: true, start: [startNode], end: iter.node };\n                }\n            }\n            else if (iter.name == \"StructureOpen\") {\n                depth++;\n            }\n        } while (iter.next(true));\n        return { matched: true, start: [startNode], end: null };\n    }\n    else if (startNode.type.name == \"StructureClose\") {\n        let openers = [];\n        tree.iterate({\n            enter(node) {\n                if (node.name == \"StructureClose\") {\n                    const closer = state.doc.sliceString(node.from, node.to);\n                    if (closer == \"}\") {\n                        openers.pop();\n                    }\n                    else if (closer == \")\") {\n                        openers.splice(openers.length - 2);\n                    }\n                    else if (closer == \"]\") {\n                        openers = [];\n                    }\n                }\n                else if (node.name == \"StructureOpen\") {\n                    openers.push(node.node);\n                }\n            },\n            from: 0,\n            to: startNode.from - 1,\n        });\n        const closer = state.doc.sliceString(startNode.from, startNode.to);\n        if (closer == \"}\") {\n            if (openers.length >= 1) {\n                return { matched: true, start: [openers.pop()], end: startNode };\n            }\n        }\n        else if (closer == \")\") {\n            if (openers.length >= 2) {\n                return { matched: true, start: openers.splice(openers.length - 2), end: startNode };\n            }\n        }\n        else if (closer == \"]\") {\n            if (openers.length > 0) {\n                return { matched: true, start: openers, end: startNode };\n            }\n        }\n        else {\n            throw new Error(`Unexpected StructureClose ${closer}`);\n        }\n        return { matched: false, highlight: startNode };\n    }\n    return null;\n}\nconst bracketMatchingState = StateField.define({\n    create() {\n        return Decoration.none;\n    },\n    update(decorationSet, transaction) {\n        if (!transaction.docChanged && !transaction.selection) {\n            return decorationSet;\n        }\n        const decorations = [];\n        const config = transaction.state.facet(bracketMatchingConfig);\n        for (const range of transaction.state.selection.ranges) {\n            if (!range.empty) {\n                continue;\n            }\n            const match = matchBrackets(transaction.state, range.head, 1 /* Side.FORWARDS */) ?? matchBrackets(transaction.state, range.head, -1 /* Side.BACKWARDS */);\n            if (match) {\n                if (match.matched) {\n                    match.start.map((node) => decorations.push(matchingMark.range(node.from, node.to)));\n                    if (match.end) {\n                        decorations.push(matchingMark.range(match.end.from, match.end.to));\n                    }\n                    else if (config.showEof) {\n                        decorations.push(eofWidget.range(transaction.state.doc.length));\n                    }\n                }\n                else {\n                    decorations.push(nonmatchingMark.range(match.highlight.from, match.highlight.to));\n                }\n            }\n        }\n        return Decoration.set(decorations, true);\n    },\n    provide: (f) => EditorView.decorations.from(f),\n});\nexport function vyxalBracketMatching(config) {\n    return [bracketMatchingConfig.of(config), theme, bracketMatchingState];\n}\n","import { syntaxTree } from \"@codemirror/language\";\nimport { Decoration, ViewPlugin, WidgetType } from \"@codemirror/view\";\nclass CompressButtonWidget extends WidgetType {\n    eq() {\n        return true;\n    }\n    toDOM() {\n        const icon = document.createElement(\"i\");\n        icon.ariaHidden = \"true\";\n        icon.classList.add(\"cm-compress-button\");\n        icon.classList.add(\"cm-placeholder\");\n        icon.classList.add(\"bi\");\n        icon.classList.add(\"bi-file-zip\");\n        icon.style.cursor = \"pointer\";\n        return icon;\n    }\n    ignoreEvent() {\n        return false;\n    }\n}\nfunction insertButtons(view) {\n    const widgets = [];\n    for (const { from, to } of view.visibleRanges) {\n        syntaxTree(view.state).iterate({\n            from, to,\n            enter(node) {\n                const text = view.state.sliceDoc(node.from, node.to);\n                if (node.name == \"String\" && /[^“„]$/.test(text)) {\n                    widgets.push(Decoration.widget({\n                        widget: new CompressButtonWidget(),\n                        side: 1,\n                    }).range(/[\"”]$/.test(text) && text.length > 1 ? node.to - 1 : node.to));\n                }\n            },\n        });\n    }\n    return Decoration.set(widgets);\n}\nexport function compressButtonPlugin(util) {\n    return ViewPlugin.fromClass(class {\n        constructor(view) {\n            this.decorations = insertButtons(view);\n        }\n        update(update) {\n            if (update.docChanged || update.viewportChanged || syntaxTree(update.startState) != syntaxTree(update.state)) {\n                this.decorations = insertButtons(update.view);\n            }\n        }\n    }, {\n        decorations: (v) => v.decorations,\n        eventHandlers: {\n            click: (event, view) => {\n                const target = event.target;\n                if (target.classList.contains(\"cm-compress-button\")) {\n                    return toggleCompression(util, view, syntaxTree(view.state).resolveInner(view.posAtDOM(target), -1));\n                }\n                return false;\n            },\n        },\n    });\n}\nexport function toggleCompression(util, view, node) {\n    if (node.name == \"String\") {\n        let text = view.state.sliceDoc(node.from, node.to);\n        const isCompressed = text.endsWith(\"”\");\n        if (!(isCompressed || text.endsWith(`\"`))) {\n            text += `\"`;\n        }\n        const trimmed = text.slice(1, -1);\n        (isCompressed ? util.decompress(trimmed) : util.compress(trimmed).then((r) => r.slice(1, -1))).then((result) => {\n            view.dispatch({\n                changes: {\n                    from: node.from,\n                    to: node.to,\n                    insert: isCompressed ? `\"${result}\"` : `\"${result}”`,\n                },\n            });\n        });\n        return true;\n    }\n    return false;\n}\n","import { syntaxTree } from \"@codemirror/language\";\nimport { MapMode } from \"@codemirror/state\";\nimport { hoverTooltip } from \"@codemirror/view\";\nexport function vyxalHover(util) {\n    async function makeStringTooltip(view, node) {\n        if (node.name != \"String\") {\n            return null;\n        }\n        const content = view.state.sliceDoc(node.from, node.to);\n        if (content.at(-1) == \"”\") {\n            const decompressed = await util.decompress(content.slice(1, -1));\n            const container = document.createElement(\"div\");\n            container.innerHTML = `<div class=\"card shadow\"><div class=\"card-body\">Compressed string: <code>${decompressed}</code></div></div>`;\n            return container;\n        }\n        return null;\n    }\n    const stringTooltip = hoverTooltip(async (view, pos) => {\n        const node = syntaxTree(view.state).resolve(pos);\n        const element = await makeStringTooltip(view, node);\n        if (element != null) {\n            const container = document.createElement(\"div\");\n            container.appendChild(element);\n            return {\n                pos: pos,\n                create: () => {\n                    return {\n                        dom: container,\n                        update: async (update) => {\n                            if (update.changes.touchesRange(node.from, node.to)) {\n                                const newPos = update.changes.mapPos(pos, -1, MapMode.TrackDel);\n                                if (newPos != null) {\n                                    const element = await makeStringTooltip(view, syntaxTree(view.state).resolve(newPos));\n                                    if (element != null) {\n                                        container.replaceChildren(element);\n                                    }\n                                }\n                            }\n                        },\n                    };\n                },\n            };\n        }\n        return null;\n    });\n    return [stringTooltip];\n}\n","import { vyxalLitLanguage } from \"../../../../common/scripts/language/vyxal-lit\";\nimport { elementAutocomplete } from \"../common\";\nexport function vyxalLitCompletion(elementData) {\n    return vyxalLitLanguage.data.of({\n        autocomplete(context) {\n            return elementAutocomplete(elementData, context, true);\n        },\n    });\n}\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useCallback, useContext, useMemo, useRef, useState } from \"react\";\nimport ReactCodeMirror, { keymap, Prec } from \"@uiw/react-codemirror\";\nimport { minimalSetup } from \"codemirror\";\nimport { vscodeDark } from \"@uiw/codemirror-theme-vscode\";\nimport { vyxalCompletion } from \"../language/sbcs/autocomplete\";\nimport { autocompletion } from \"@codemirror/autocomplete\";\nimport { EditorView, highlightActiveLine, highlightActiveLineGutter, lineNumbers, showPanel } from \"@codemirror/view\";\nimport { Theme } from \"./settings\";\nimport { githubLight } from \"@uiw/codemirror-theme-github\";\nimport { ElementDataContext } from \"../interpreter/element-data\";\nimport { createPortal } from \"react-dom\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { Button, Stack } from \"react-bootstrap\";\nimport { vyxalBracketMatching } from \"../language/sbcs/bracket-matching\";\nimport { elementTooltip, vyxal, vyxalLiterate } from \"../language/common\";\nimport { compressButtonPlugin } from \"../language/sbcs/compression\";\nimport { vyxalHover } from \"../language/sbcs/tooltips\";\nimport { vyxalLitCompletion } from \"../language/literate/autocomplete\";\nconst commonExtensions = [\n    Prec.high(keymap.of([\n        {\n            key: \"Ctrl-Enter\",\n            run(view) {\n                if (view.state.doc.length <= 0) {\n                    return false;\n                }\n                window.dispatchEvent(new Event(\"run-vyxal\")); // dubious\n                return true;\n            },\n            preventDefault: true,\n        },\n    ])),\n    minimalSetup,\n    autocompletion(),\n    lineNumbers(),\n    highlightActiveLine(),\n    highlightActiveLineGutter(),\n    EditorView.theme({\n        \"&\": { height: \"100%\" },\n        \"&.cm-focused\": { outline: \"none\" },\n        \".cm-scroller\": { overflow: \"auto\" },\n        \".cm-tooltip\": { \"z-index\": \"400 !important\" },\n    }),\n];\nconst THEMES = {\n    [Theme.Dark]: vscodeDark,\n    [Theme.Light]: githubLight,\n};\nfunction EditorError({ error, resetErrorBoundary }) {\n    return _jsxs(Stack, { direction: \"vertical\", className: \"bg-danger-subtle p-2 position-absolute\", children: [_jsxs(\"h3\", { className: \"text-danger\", children: [_jsx(\"i\", { className: \"bi bi-x-circle\" }), \" An error occured\"] }), _jsx(Button, { variant: \"danger\", onClick: resetErrorBoundary, children: \"Reset editor\" }), error.toString(), _jsx(\"div\", { children: error.stack })] });\n}\nexport default function Editor({ utilWorker, code, ratio, children, setCode, settings, literate, claimFocus, autoFocus }) {\n    const elementData = useContext(ElementDataContext);\n    const editorRef = useRef(null);\n    const onChange = useCallback((code) => {\n        setCode(code);\n    }, []);\n    const [headerDom, setHeaderDom] = useState(null);\n    const header = useMemo(() => showPanel.of(() => {\n        const dom = document.createElement(\"div\");\n        dom.classList.add(\"p-1\");\n        setHeaderDom(dom);\n        return { dom, top: true };\n    }), []);\n    const focusChangeHandler = useMemo(() => EditorView.focusChangeEffect.of((state, focusing) => {\n        if (focusing && editorRef.current) {\n            claimFocus(editorRef.current);\n        }\n        return null;\n    }), []);\n    const languageExtensions = useMemo(() => literate ? [\n        vyxalLiterate, vyxalLitCompletion(elementData), elementTooltip(elementData, true),\n    ] : [\n        vyxal, vyxalCompletion(elementData), vyxalHover(utilWorker), elementTooltip(elementData, false), compressButtonPlugin(utilWorker),\n    ], [literate, utilWorker]);\n    const extensions = [\n        commonExtensions, header, focusChangeHandler,\n        languageExtensions,\n        useMemo(() => settings.highlightBrackets != \"no\" ? vyxalBracketMatching({ showEof: settings.highlightBrackets == \"yes-eof\" }) : [], [settings]),\n    ];\n    return _jsx(_Fragment, { children: _jsxs(ErrorBoundary, { FallbackComponent: EditorError, children: [_jsx(ReactCodeMirror, { basicSetup: false, theme: THEMES[settings.theme], value: code, style: { height: ratio }, onChange: onChange, extensions: extensions, ref: editorRef, autoFocus: autoFocus }), headerDom !== null && createPortal(children, headerDom)] }) });\n}\n;\n"],"names":["deserialize","version","states","stateData","goto","nodeNames","maxTerm","skippedNodes","repeatNodeCount","tokenData","tokenizers","topRules","tokenPrec","vyxalLanguage","define","parser","configure","props","Digraph","function","propertyName","SugarTrigraph","macroName","SyntaxTrigraph","operator","StructureOpen","bracket","StructureClose","ListStuff","Modifier","moduleKeyword","VariableThing","variableName","String","string","SingleCharString","special","TwoCharString","number","TwoCharNumber","Branch","punctuation","ContextIndex","controlKeyword","Comment","comment","Element","keyword","spec_WeirdKW","__proto__","if","for","while","endfor","endwhile","endlambda","end","else","elif","body","do","branch","then","in","using","from","as","with","given","has","does","on","lambda","lam","specialized","term","get","value","vyxalLitLanguage","Structure","Lambda","Number","literal","GroupStuff","KEYWORD","PREFIXED_KEYWORD","RegExp","source","elementCompletion","thing","literate","label","type","keywords","symbol","detail","name","info","container","document","createElement","root","render","ThingCard","dom","destroy","setTimeout","unmount","syncElementAutocomplete","fuse","context","word","matchBefore","results","search","text","trimStart","length","filter","options","map","result","item","boost","score","update","current","to","async","elementAutocomplete","elementData","sync","Promise","resolve","explicit","pos","elements","values","e","elementTooltip","view","node","state","hovered","doc","sliceString","modifiersByKeyword","modifiers","elementsByKeyword","syntax","undefined","create","card","shadow","vyxal","vyxalLiterate","vyxalCompletion","data","of","autocomplete","sugar","desugared","sugars","theme","baseTheme","backgroundColor","display","matchingMark","mark","class","nonmatchingMark","EOFWidget","eq","toDOM","element","classList","add","textContent","eofWidget","widget","side","bracketMatchingConfig","combine","configs","showEof","matchBrackets","position","tree","startNode","resolveInner","iter","cursorAt","depth","closer","matched","start","next","openers","iterate","enter","pop","splice","push","Error","highlight","bracketMatchingState","none","decorationSet","transaction","docChanged","selection","decorations","config","facet","range","ranges","empty","match","head","set","provide","f","CompressButtonWidget","icon","ariaHidden","style","cursor","ignoreEvent","insertButtons","widgets","visibleRanges","sliceDoc","test","vyxalHover","util","makeStringTooltip","content","at","decompressed","decompress","slice","innerHTML","appendChild","changes","touchesRange","newPos","mapPos","TrackDel","replaceChildren","vyxalLitCompletion","commonExtensions","high","key","run","window","dispatchEvent","Event","preventDefault","height","outline","overflow","THEMES","Dark","Light","EditorError","error","resetErrorBoundary","Stack","direction","className","children","Button","variant","onClick","toString","stack","Editor","utilWorker","code","ratio","setCode","settings","claimFocus","autoFocus","useContext","editorRef","useRef","onChange","useCallback","headerDom","setHeaderDom","useState","header","useMemo","top","focusChangeHandler","focusChangeEffect","focusing","languageExtensions","fromClass","constructor","this","viewportChanged","startState","v","eventHandlers","click","event","target","contains","isCompressed","endsWith","trimmed","compress","r","dispatch","insert","toggleCompression","posAtDOM","extensions","highlightBrackets","FallbackComponent","basicSetup","ref","createPortal"],"sourceRoot":""}